"use strict";(self.webpackChunkselectdb_portal=self.webpackChunkselectdb_portal||[]).push([[79713],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,u=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=l(n),m=i,f=c["".concat(u,".").concat(m)]||c[m]||p[m]||o;return n?r.createElement(f,a(a({ref:t},d),{},{components:n})):r.createElement(f,a({ref:t},d))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=m;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[c]="string"==typeof e?e:i,a[1]=s;for(var l=2;l<o;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},41084:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var r=n(87462),i=(n(67294),n(3905));const o={title:"Contribute UDF",language:"en"},a=void 0,s={unversionedId:"extending-doris/udf/contribute-udf",id:"version-0.15/extending-doris/udf/contribute-udf",title:"Contribute UDF",description:"\x3c!--",source:"@site/versioned_docs/version-0.15/extending-doris/udf/contribute-udf.md",sourceDirName:"extending-doris/udf",slug:"/extending-doris/udf/contribute-udf",permalink:"/docs/0.15/extending-doris/udf/contribute-udf",draft:!1,tags:[],version:"0.15",frontMatter:{title:"Contribute UDF",language:"en"},sidebar:"docs",previous:{title:"DataX doriswriter",permalink:"/docs/0.15/extending-doris/datax"},next:{title:"User Defined Function",permalink:"/docs/0.15/extending-doris/udf/user-defined-function"}},u={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Ready to work",id:"ready-to-work",level:2},{value:"Source code",id:"source-code",level:3},{value:"manual",id:"manual",level:3},{value:"Contribute UDF to the community",id:"contribute-udf-to-the-community",level:2}],d={toc:l};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"contribute-udf"},"Contribute UDF"),(0,i.kt)("p",null,"This manual mainly introduces how external users can contribute their own UDF functions to the Doris community."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"UDF function is universal"),(0,i.kt)("p",{parentName:"li"},"The versatility here mainly refers to: UDF functions are widely used in certain business scenarios. Such UDF functions are valuable and can be used directly by other users in the community."),(0,i.kt)("p",{parentName:"li"},"If you are not sure whether the UDF function you wrote is universal, you can send an email to ",(0,i.kt)("inlineCode",{parentName:"p"},"dev@doris.apache.org")," or directly create an ISSUE to initiate the discussion.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"UDF has completed testing and is running normally in the user's production environment"))),(0,i.kt)("h2",{id:"ready-to-work"},"Ready to work"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"UDF source code"),(0,i.kt)("li",{parentName:"ol"},"User Manual of UDF")),(0,i.kt)("h3",{id:"source-code"},"Source code"),(0,i.kt)("p",null,"Create a folder for UDF functions under ",(0,i.kt)("inlineCode",{parentName:"p"},"contrib/udf/src/"),", and store the source code and CMAKE files here. The source code to be contributed should include: ",(0,i.kt)("inlineCode",{parentName:"p"},".h"),", ",(0,i.kt)("inlineCode",{parentName:"p"},".cpp"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"CMakeFile.txt"),". Taking udf_samples as an example here, first create a new folder under the ",(0,i.kt)("inlineCode",{parentName:"p"},"contrib/udf/src/")," path and store the source code."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"   \u251c\u2500\u2500contrib\n   \u2502  \u2514\u2500\u2500 udf\n   \u2502    \u251c\u2500\u2500 CMakeLists.txt\n   \u2502    \u2514\u2500\u2500 src\n   \u2502       \u2514\u2500\u2500 udf_samples\n   \u2502           \u251c\u2500\u2500 CMakeLists.txt\n   \u2502           \u251c\u2500\u2500 uda_sample.cpp\n   \u2502           \u251c\u2500\u2500 uda_sample.h\n   \u2502           \u251c\u2500\u2500 udf_sample.cpp\n   \u2502           \u2514\u2500\u2500 udf_sample.h\n\n")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"CMakeLists.txt"),(0,i.kt)("p",{parentName:"li"},"After the user's ",(0,i.kt)("inlineCode",{parentName:"p"},"CMakeLists.txt")," is placed here, a small amount of changes are required. Just remove ",(0,i.kt)("inlineCode",{parentName:"p"},"include udf")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"udf lib"),". The reason for the removal is that it has been declared in the CMake file at the ",(0,i.kt)("inlineCode",{parentName:"p"},"contrib/udf")," level."))),(0,i.kt)("h3",{id:"manual"},"manual"),(0,i.kt)("p",null,"The user manual needs to include: UDF function definition description, applicable scenarios, function syntax, how to compile UDF, how to use UDF in Doris, and use examples."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The user manual must contain both Chinese and English versions and be stored under ",(0,i.kt)("inlineCode",{parentName:"p"},"docs/zh-CN/extending-doris/contrib/udf")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"docs/en/extending-doris/contrib/udf")," respectively."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"\u251c\u2500\u2500 docs\n\u2502\xa0\xa0 \u2514\u2500\u2500 zh-CN\n\u2502\xa0\xa0     \u2514\u2500\u2500extending-doris\n\u2502          \u2514\u2500\u2500udf\n\u2502            \u2514\u2500\u2500contrib\n\u2502              \u251c\u2500\u2500 udf-simple-manual.md\n\n")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"\u251c\u2500\u2500 docs\n\u2502\xa0\xa0 \u2514\u2500\u2500 en\n\u2502\xa0\xa0     \u2514\u2500\u2500extending-doris\n\u2502          \u2514\u2500\u2500udf\n\u2502            \u2514\u2500\u2500contrib\n\u2502              \u251c\u2500\u2500 udf-simple-manual.md\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add the two manual files to the sidebar in Chinese and English."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'vi docs/.vuepress/sidebar/zh-CN.js\n{\n    title: "\u7528\u6237\u8d21\u732e\u7684 UDF",\n    directoryPath: "contrib/",\n    children:\n    [\n        "udf-simple-manual",\n    ],\n},\n')),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'vi docs/.vuepress/sidebar/en.js\n{\n    title: "Users contribute UDF",\n    directoryPath: "contrib/",\n    children:\n    [\n        "udf-simple-manual",\n    ],\n},\n\n')))),(0,i.kt)("h2",{id:"contribute-udf-to-the-community"},"Contribute UDF to the community"),(0,i.kt)("p",null,"When you meet the conditions and prepare the code, you can contribute UDF to the Doris community after the document. Simply submit the request (PR) on ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/incubator-doris"},"Github"),". See the specific submission method: ",(0,i.kt)("a",{parentName:"p",href:"https://help.github.com/articles/about-pull-requests/"},"Pull Request (PR)"),"."),(0,i.kt)("p",null,"Finally, when the PR assessment is passed and merged. Congratulations, your UDF becomes a third-party UDF supported by Doris. You can check it out in the extended functions section of ",(0,i.kt)("a",{parentName:"p",href:"http://doris.apache.org/master/zh-CN/"},"Doris official website"),"~."))}c.isMDXComponent=!0}}]);