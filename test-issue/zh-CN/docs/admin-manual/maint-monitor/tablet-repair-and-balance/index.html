<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-admin-manual/maint-monitor/tablet-repair-and-balance">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/zh-CN/blog/rss.xml" title="Apache Doris RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-CN/blog/atom.xml" title="Apache Doris Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DT7W9E9722"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DT7W9E9722",{anonymize_ip:!0})</script>






<link rel="icon" href="/zh-CN/images/logo-only.png">
<link rel="manifest" href="/zh-CN/manifest.json">
<meta name="theme-color" content="#FFFFFF">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/zh-CN/img/docusaurus.png">
<link rel="mask-icon" href="/zh-CN/img/docusaurus.svg" color="rgb(37, 194, 160)">
<meta name="msapplication-TileImage" content="/zh-CN/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:500">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:400"><title data-rh="true">数据副本管理 - Apache Doris</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doris.apache.org/zh-CN/docs/admin-manual/maint-monitor/tablet-repair-and-balance"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="数据副本管理 - Apache Doris"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/zh-CN/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://doris.apache.org/zh-CN/docs/admin-manual/maint-monitor/tablet-repair-and-balance"><link data-rh="true" rel="alternate" href="https://doris.apache.org/docs/admin-manual/maint-monitor/tablet-repair-and-balance" hreflang="en"><link data-rh="true" rel="alternate" href="https://doris.apache.org/zh-CN/docs/admin-manual/maint-monitor/tablet-repair-and-balance" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://doris.apache.org/docs/admin-manual/maint-monitor/tablet-repair-and-balance" hreflang="x-default"><link rel="stylesheet" href="https://cdn-tencent.selectdb.com/zh-CN/assets/css/styles.b7b313c5.css">
<link rel="preload" href="https://cdn-tencent.selectdb.com/zh-CN/assets/js/runtime~main.676b2202.js" as="script">
<link rel="preload" href="https://cdn-tencent.selectdb.com/zh-CN/assets/js/main.04a0b470.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-CN/"><div class="navbar__logo"><img src="https://cdn-tencent.selectdb.com/images/logo.svg" alt="Doris" class="themedImage_ToTc themedImage--light_HNdA"><img src="https://cdn-tencent.selectdb.com/images/logo.svg" alt="Doris" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/zh-CN/">首页</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-CN/docs/summary/basic-summary">文档</a><a class="navbar__item navbar__link" href="/zh-CN/blog">博客</a><a class="navbar__item navbar__link" href="/zh-CN/community/team">社区</a><a class="navbar__item navbar__link" href="/zh-CN/users">用户</a></div><div class="navbar__items navbar__items--right"><div class="locale-box"><a href="/docs/admin-manual/maint-monitor/tablet-repair-and-balance" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">EN</a><a href="/zh-CN/docs/admin-manual/maint-monitor/tablet-repair-and-balance" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link dropdown__link--active">中文</a></div><a class="navbar__item navbar__link header-right-button-primary navbar-download-mobile" href="/zh-CN/download">下载</a><div class="navbar-search searchBox_ZlJk"><div class="navbar__search searchBarContainer_PzyC"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing__K5d searchBarLoadingRing_e2f0"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_m7ml"><kbd class="searchHint_zuPL">ctrl</kbd><kbd class="searchHint_zuPL">K</kbd></div></div></div><span class="github-btn desktop header-right-button-github"><span class="github-btn github-btn-large"><a class="gh-btn" href="//github.com/apache/doris/" target="_blank"><span class="gh-ico" aria-hidden="true"></span><span class="gh-text">Star</span></a><a class="gh-count" target="_blank" href="//github.com/apache/doris/stargazers/"></a></span></span><a class="header-right-button-primary navbar-download-desktop" href="/zh-CN/download">下载</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar"><div class="doc-search"><div class="navbar__search searchBarContainer_PzyC"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing__K5d searchBarLoadingRing_e2f0"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_m7ml"><kbd class="searchHint_zuPL">ctrl</kbd><kbd class="searchHint_zuPL">K</kbd></div></div></div><a class="learning-path" href="/zh-CN/learning">学习路径</a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/summary/basic-summary">Doris 介绍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/get-starting/">快速开始</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/install/install-deploy">安装部署</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/data-table/data-model">数据表设计</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/data-operate/import/load-manual">数据操作</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/advanced/alter-table/schema-change">进阶使用</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/ecosystem/external-table/doris-on-es">生态扩展</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/sql-manual/sql-functions/date-time-functions/convert_tz">SQL 手册</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh-CN/docs/admin-manual/cluster-management/upgrade">管理手册</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-CN/docs/admin-manual/cluster-management/upgrade">集群管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-CN/docs/admin-manual/data-admin/backup">数据管理</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/sql-interception">SQL拦截</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/query-profile">查询分析</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/monitor-metrics/fe-metrics">运维监控</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/monitor-metrics/fe-metrics">监控指标</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/disk-capacity">磁盘空间管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/metadata-operation">元数据运维</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/tablet-meta-tool">Tablet 元数据管理工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/tablet-repair-and-balance">数据副本管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/tablet-restore-tool">Tablet 恢复工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/monitor-alert">监控和报警</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/doris-error-code">Doris错误代码表</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/maint-monitor/be-olap-error-code">BE端OLAP函数的返回值说明</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-CN/docs/admin-manual/config/fe-config">配置管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-CN/docs/admin-manual/privilege-ldap/user-privilege">用户权限及认证</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-CN/docs/admin-manual/multi-tenant">多租户和资源划分</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh-CN/docs/admin-manual/http-actions/fe/manager/cluster-action">HTTP API</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/faq/install-faq">常见问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/benchmark/ssb">性能测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh-CN/docs/releasenotes/release-1.1.4">Release notes</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Apache Doris<!-- --> <b>1.1</b> 版本的文档。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/zh-CN/docs/dev/admin-manual/maint-monitor/tablet-repair-and-balance">最新版本</a></b> (<!-- -->dev<!-- -->)。</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-CN/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">管理手册</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">运维监控</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">数据副本管理</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>数据副本管理</h1></header><h1>数据副本管理</h1><p>从 0.9.0 版本开始，Doris 引入了优化后的副本管理策略，同时支持了更为丰富的副本状态查看工具。本文档主要介绍 Doris 数据副本均衡、修复方面的调度策略，以及副本管理的运维方法。帮助用户更方便的掌握和管理集群中的副本状态。</p><blockquote><p>Colocation 属性的表的副本修复和均衡可以参阅<a href="/zh-CN/docs/advanced/join-optimization/colocation-join">这里</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="名词解释">名词解释<a class="hash-link" href="#名词解释" title="标题的直接链接">​</a></h2><ol><li>Tablet：Doris 表的逻辑分片，一个表有多个分片。</li><li>Replica：分片的副本，默认一个分片有3个副本。</li><li>Healthy Replica：健康副本，副本所在 Backend 存活，且副本的版本完整。</li><li>TabletChecker（TC）：是一个常驻的后台线程，用于定期扫描所有的 Tablet，检查这些 Tablet 的状态，并根据检查结果，决定是否将 tablet 发送给 TabletScheduler。</li><li>TabletScheduler（TS）：是一个常驻的后台线程，用于处理由 TabletChecker 发来的需要修复的 Tablet。同时也会进行集群副本均衡的工作。</li><li>TabletSchedCtx（TSC）：是一个 tablet 的封装。当 TC 选择一个 tablet 后，会将其封装为一个 TSC，发送给 TS。</li><li>Storage Medium：存储介质。Doris 支持对分区粒度指定不同的存储介质，包括 SSD 和 HDD。副本调度策略也是针对不同的存储介质分别调度的。</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              +--------+              +-----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              |  Meta  |              |  Backends |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              +---^----+              +------^----+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  | |                        | 3. Send clone tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1. Check tablets | |                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           +--------v------+        +-----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           | TabletChecker +--------&gt; TabletScheduler |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           +---------------+        +-----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   2. Waiting to be scheduled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上图是一个简化的工作流程。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="副本状态">副本状态<a class="hash-link" href="#副本状态" title="标题的直接链接">​</a></h2><p>一个 Tablet 的多个副本，可能因为某些情况导致状态不一致。Doris 会尝试自动修复这些状态不一致的副本，让集群尽快从错误状态中恢复。</p><p><strong>一个 Replica 的健康状态有以下几种：</strong></p><ol><li><p>BAD</p><p>即副本损坏。包括但不限于磁盘故障、BUG等引起的副本不可恢复的损毁状态。</p></li><li><p>VERSION<!-- -->_<!-- -->MISSING</p><p>版本缺失。Doris 中每一批次导入都对应一个数据版本。而一个副本的数据由多个连续的版本组成。而由于导入错误、延迟等原因，可能导致某些副本的数据版本不完整。</p></li><li><p>HEALTHY</p><p>健康副本。即数据正常的副本，并且副本所在的 BE 节点状态正常（心跳正常且不处于下线过程中）</p></li></ol><p><strong>一个 Tablet 的健康状态由其所有副本的状态决定，有以下几种：</strong></p><ol><li><p>REPLICA<!-- -->_<!-- -->MISSING</p><p>副本缺失。即存活副本数小于期望副本数。</p></li><li><p>VERSION<!-- -->_<!-- -->INCOMPLETE</p><p>存活副本数大于等于期望副本数，但其中健康副本数小于期望副本数。</p></li><li><p>REPLICA<!-- -->_<!-- -->RELOCATING</p><p>拥有等于 replication num 的版本完整的存活副本数，但是部分副本所在的 BE 节点处于 unavailable 状态（比如 decommission 中）</p></li><li><p>REPLICA<!-- -->_<!-- -->MISSING<!-- -->_<!-- -->IN<!-- -->_<!-- -->CLUSTER</p><p>当使用多 cluster 方式时，健康副本数大于等于期望副本数，但在对应 cluster 内的副本数小于期望副本数。</p></li><li><p>REDUNDANT</p><p>副本冗余。健康副本都在对应 cluster 内，但数量大于期望副本数。或者有多余的 unavailable 副本。</p></li><li><p>FORCE<!-- -->_<!-- -->REDUNDANT</p><p>这是一个特殊状态。只会出现在当期望副本数大于等于可用节点数时，并且 Tablet 处于副本缺失状态时出现。这种情况下，需要先删除一个副本，以保证有可用节点用于创建新副本。</p></li><li><p>COLOCATE<!-- -->_<!-- -->MISMATCH</p><p>针对 Colocation 属性的表的分片状态。表示分片副本与 Colocation Group 的指定的分布不一致。</p></li><li><p>COLOCATE<!-- -->_<!-- -->REDUNDANT</p><p>针对 Colocation 属性的表的分片状态。表示 Colocation 表的分片副本冗余。</p></li><li><p>HEALTHY</p><p>健康分片，即条件<!-- -->[1-8]<!-- -->都不满足。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="副本修复">副本修复<a class="hash-link" href="#副本修复" title="标题的直接链接">​</a></h2><p>TabletChecker 作为常驻的后台进程，会定期检查所有分片的状态。对于非健康状态的分片，将会交给 TabletScheduler 进行调度和修复。修复的实际操作，都由 BE 上的 clone 任务完成。FE 只负责生成这些 clone 任务。</p><blockquote><p>注1：副本修复的主要思想是先通过创建或补齐使得分片的副本数达到期望值，然后再删除多余的副本。</p><p>注2：一个 clone 任务就是完成从一个指定远端 BE 拷贝指定数据到指定目的端 BE 的过程。</p></blockquote><p>针对不同的状态，我们采用不同的修复方式：</p><ol><li><p>REPLICA<!-- -->_<!-- -->MISSING/REPLICA<!-- -->_<!-- -->RELOCATING</p><p>选择一个低负载的，可用的 BE 节点作为目的端。选择一个健康副本作为源端。clone 任务会从源端拷贝一个完整的副本到目的端。对于副本补齐，我们会直接选择一个可用的 BE 节点，而不考虑存储介质。</p></li><li><p>VERSION<!-- -->_<!-- -->INCOMPLETE</p><p>选择一个相对完整的副本作为目的端。选择一个健康副本作为源端。clone 任务会从源端尝试拷贝缺失的版本到目的端的副本。</p></li><li><p>REPLICA<!-- -->_<!-- -->MISSING<!-- -->_<!-- -->IN<!-- -->_<!-- -->CLUSTER</p><p>这种状态处理方式和 REPLICA<!-- -->_<!-- -->MISSING 相同。</p></li><li><p>REDUNDANT</p><p>通常经过副本修复后，分片会有冗余的副本。我们选择一个冗余副本将其删除。冗余副本的选择遵从以下优先级：</p><ol><li>副本所在 BE 已经下线</li><li>副本已损坏</li><li>副本所在 BE 失联或在下线中</li><li>副本处于 CLONE 状态（该状态是 clone 任务执行过程中的一个中间状态）</li><li>副本有版本缺失</li><li>副本所在 cluster 不正确</li><li>副本所在 BE 节点负载高</li></ol></li><li><p>FORCE<!-- -->_<!-- -->REDUNDANT</p><p>不同于 REDUNDANT，因为此时虽然 Tablet 有副本缺失，但是因为已经没有额外的可用节点用于创建新的副本了。所以此时必须先删除一个副本，以腾出一个可用节点用于创建新的副本。
删除副本的顺序同 REDUNDANT。</p></li><li><p>COLOCATE<!-- -->_<!-- -->MISMATCH</p><p>从 Colocation Group 中指定的副本分布 BE 节点中选择一个作为目的节点进行副本补齐。</p></li><li><p>COLOCATE<!-- -->_<!-- -->REDUNDANT</p><p>删除一个非 Colocation Group 中指定的副本分布 BE 节点上的副本。</p></li></ol><p>Doris 在选择副本节点时，不会将同一个 Tablet 的副本部署在同一个 host 的不同 BE 上。保证了即使同一个 host 上的所有 BE 都挂掉，也不会造成全部副本丢失。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="调度优先级">调度优先级<a class="hash-link" href="#调度优先级" title="标题的直接链接">​</a></h3><p>TabletScheduler 里等待被调度的分片会根据状态不同，赋予不同的优先级。优先级高的分片将会被优先调度。目前有以下几种优先级。</p><ol><li><p>VERY<!-- -->_<!-- -->HIGH</p><ul><li>REDUNDANT。对于有副本冗余的分片，我们优先处理。虽然逻辑上来讲，副本冗余的紧急程度最低，但是因为这种情况处理起来最快且可以快速释放资源（比如磁盘空间等），所以我们优先处理。</li><li>FORCE<!-- -->_<!-- -->REDUNDANT。同上。</li></ul></li><li><p>HIGH</p><ul><li>REPLICA<!-- -->_<!-- -->MISSING 且多数副本缺失（比如3副本丢失了2个）</li><li>VERSION<!-- -->_<!-- -->INCOMPLETE 且多数副本的版本缺失</li><li>COLOCATE<!-- -->_<!-- -->MISMATCH 我们希望 Colocation 表相关的分片能够尽快修复完成。</li><li>COLOCATE<!-- -->_<!-- -->REDUNDANT</li></ul></li><li><p>NORMAL</p><ul><li>REPLICA<!-- -->_<!-- -->MISSING 但多数存活（比如3副本丢失了1个）</li><li>VERSION<!-- -->_<!-- -->INCOMPLETE 但多数副本的版本完整</li><li>REPLICA<!-- -->_<!-- -->RELOCATING 且多数副本需要 relocate（比如3副本有2个）</li></ul></li><li><p>LOW</p><ul><li>REPLICA<!-- -->_<!-- -->MISSING<!-- -->_<!-- -->IN<!-- -->_<!-- -->CLUSTER</li><li>REPLICA<!-- -->_<!-- -->RELOCATING 但多数副本 stable</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="手动优先级">手动优先级<a class="hash-link" href="#手动优先级" title="标题的直接链接">​</a></h3><p>系统会自动判断调度优先级。但是有些时候，用户希望某些表或分区的分片能够更快的被修复。因此我们提供一个命令，用户可以指定某个表或分区的分片被优先修复：</p><p><code>ADMIN REPAIR TABLE tbl [PARTITION (p1, p2, ...)];</code></p><p>这个命令，告诉 TC，在扫描 Tablet 时，对需要优先修复的表或分区中的有问题的 Tablet，给予 VERY<!-- -->_<!-- -->HIGH 的优先级。</p><blockquote><p>注：这个命令只是一个 hint，并不能保证一定能修复成功，并且优先级也会随 TS 的调度而发生变化。并且当 Master FE 切换或重启后，这些信息都会丢失。</p></blockquote><p>可以通过以下命令取消优先级：</p><p><code>ADMIN CANCEL REPAIR TABLE tbl [PARTITION (p1, p2, ...)];</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="优先级调度">优先级调度<a class="hash-link" href="#优先级调度" title="标题的直接链接">​</a></h3><p>优先级保证了损坏严重的分片能够优先被修复，提高系统可用性。但是如果高优先级的修复任务一直失败，则会导致低优先级的任务一直得不到调度。因此，我们会根据任务的运行状态，动态的调整任务的优先级，保证所有任务都有机会被调度到。</p><ul><li>连续5次调度失败（如无法获取资源，无法找到合适的源端或目的端等），则优先级会被下调。</li><li>持续 30 分钟未被调度，则上调优先级。 </li><li>同一 tablet 任务的优先级至少间隔 5 分钟才会被调整一次。</li></ul><p>同时为了保证初始优先级的权重，我们规定，初始优先级为 VERY<!-- -->_<!-- -->HIGH 的，最低被下调到 NORMAL。而初始优先级为 LOW 的，最多被上调为 HIGH。这里的优先级调整，也会调整用户手动设置的优先级。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="副本均衡">副本均衡<a class="hash-link" href="#副本均衡" title="标题的直接链接">​</a></h2><p>Doris 会自动进行集群内的副本均衡。目前支持两种均衡策略，负载/分区。负载均衡适合需要兼顾节点磁盘使用率和节点副本数量的场景；而分区均衡会使每个分区的副本都均匀分布在各个节点，避免热点，适合对分区读写要求比较高的场景。但是，分区均衡不考虑磁盘使用率，使用分区均衡时需要注意磁盘的使用情况。 策略只能在fe启动前配置<a href="/zh-CN/docs/admin-manual/config/fe-config">tablet_rebalancer_type</a> ，不支持运行时切换。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="负载均衡">负载均衡<a class="hash-link" href="#负载均衡" title="标题的直接链接">​</a></h3><p>负载均衡的主要思想是，对某些分片，先在低负载的节点上创建一个副本，然后再删除这些分片在高负载节点上的副本。同时，因为不同存储介质的存在，在同一个集群内的不同 BE 节点上，可能存在一种或两种存储介质。我们要求存储介质为 A 的分片在均衡后，尽量依然存储在存储介质 A 中。所以我们根据存储介质，对集群的 BE 节点进行划分。然后针对不同的存储介质的 BE 节点集合，进行负载均衡调度。</p><p>同样，副本均衡会保证不会将同一个 Tablet 的副本部署在同一个 host 的 BE 上。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="be-节点负载">BE 节点负载<a class="hash-link" href="#be-节点负载" title="标题的直接链接">​</a></h4><p>我们用 ClusterLoadStatistics（CLS）表示一个 cluster 中各个 Backend 的负载均衡情况。TabletScheduler 根据这个统计值，来触发集群均衡。我们当前通过 <strong>磁盘使用率</strong> 和 <strong>副本数量</strong> 两个指标，为每个BE计算一个 loadScore，作为 BE 的负载分数。分数越高，表示该 BE 的负载越重。</p><p>磁盘使用率和副本数量各有一个权重系数，分别为 <strong>capacityCoefficient</strong> 和 <strong>replicaNumCoefficient</strong>，其 <strong>和衡为1</strong>。其中 capacityCoefficient 会根据实际磁盘使用率动态调整。当一个 BE 的总体磁盘使用率在 50% 以下，则 capacityCoefficient 值为 0.5，如果磁盘使用率在 75%（可通过 FE 配置项 <code>capacity_used_percent_high_water</code> 配置）以上，则值为 1。如果使用率介于 50% ~ 75% 之间，则该权重系数平滑增加，公式为：</p><p><code>capacityCoefficient= 2 * 磁盘使用率 - 0.5</code></p><p>该权重系数保证当磁盘使用率过高时，该 Backend 的负载分数会更高，以保证尽快降低这个 BE 的负载。</p><p>TabletScheduler 会每隔 20s 更新一次 CLS。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="分区均衡">分区均衡<a class="hash-link" href="#分区均衡" title="标题的直接链接">​</a></h3><p>分区均衡的主要思想是，将每个分区的在各个 Backend 上的 replica 数量差（即 partition skew），减少到最小。因此只考虑副本个数，不考虑磁盘使用率。
为了尽量少的迁移次数，分区均衡使用二维贪心的策略，优先均衡partition skew最大的分区，均衡分区时会尽量选择，可以使整个 cluster 的在各个 Backend 上的 replica 数量差（即 cluster skew/total skew）减少的方向。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="skew-统计">skew 统计<a class="hash-link" href="#skew-统计" title="标题的直接链接">​</a></h4><p>skew 统计信息由<code>ClusterBalanceInfo</code>表示，其中，<code>partitionInfoBySkew</code>以 partition skew 为key排序，便于找到max partition skew；<code>beByTotalReplicaCount</code>则是以 Backend 上的所有 replica 个数为key排序。<code>ClusterBalanceInfo</code>同样保持在CLS中, 同样 20s 更新一次。</p><p>max partition skew 的分区可能有多个，采用随机的方式选择一个分区计算。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="均衡策略">均衡策略<a class="hash-link" href="#均衡策略" title="标题的直接链接">​</a></h3><p>TabletScheduler 在每轮调度时，都会通过 LoadBalancer 来选择一定数目的健康分片作为 balance 的候选分片。在下一次调度时，会尝试根据这些候选分片，进行均衡调度。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="资源控制">资源控制<a class="hash-link" href="#资源控制" title="标题的直接链接">​</a></h2><p>无论是副本修复还是均衡，都是通过副本在各个 BE 之间拷贝完成的。如果同一台 BE 同一时间执行过多的任务，则会带来不小的 IO 压力。因此，Doris 在调度时控制了每个节点上能够执行的任务数目。最小的资源控制单位是磁盘（即在 be.conf 中指定的一个数据路径）。我们默认为每块磁盘配置两个 slot 用于副本修复。一个 clone 任务会占用源端和目的端各一个 slot。如果 slot 数目为零，则不会再对这块磁盘分配任务。该 slot 个数可以通过 FE 的 <code>schedule_slot_num_per_path</code> 参数配置。 </p><p>另外，我们默认为每块磁盘提供 2 个单独的 slot 用于均衡任务。目的是防止高负载的节点因为 slot 被修复任务占用，而无法通过均衡释放空间。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="副本状态查看">副本状态查看<a class="hash-link" href="#副本状态查看" title="标题的直接链接">​</a></h2><p>副本状态查看主要是查看副本的状态，以及副本修复和均衡任务的运行状态。这些状态大部分都<strong>仅存在于</strong> Master FE 节点中。因此，以下命令需直连到 Master FE 执行。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="副本状态-1">副本状态<a class="hash-link" href="#副本状态-1" title="标题的直接链接">​</a></h3><ol><li><p>全局状态检查</p><p>通过 <code>SHOW PROC &#x27;/cluster_health/tablet_health&#x27;;</code> 命令可以查看整个集群的副本状态。。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------------------------+-----------+------------+-------------------+----------------------+----------------------+--------------+----------------------------+-------------------------+-------------------+---------------------+----------------------+----------------------+------------------+-----------------------------+-----------------+-------------+------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| DbId  | DbName                         | TabletNum | HealthyNum | ReplicaMissingNum | VersionIncompleteNum | ReplicaRelocatingNum | RedundantNum | ReplicaMissingInClusterNum | ReplicaMissingForTagNum | ForceRedundantNum | ColocateMismatchNum | ColocateRedundantNum | NeedFurtherRepairNum | UnrecoverableNum | ReplicaCompactionTooSlowNum | InconsistentNum | OversizeNum | CloningNum |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------------------------+-----------+------------+-------------------+----------------------+----------------------+--------------+----------------------------+-------------------------+-------------------+---------------------+----------------------+----------------------+------------------+-----------------------------+-----------------+-------------+------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10005 | default_cluster:doris_audit_db | 84        | 84         | 0                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 0           | 0          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 13402 | default_cluster:ssb1           | 709       | 708        | 1                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 0           | 0          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10108 | default_cluster:tpch1          | 278       | 278        | 0                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 0           | 0          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Total | 3                              | 1071      | 1070       | 1                 | 0                    | 0                    | 0            | 0                          | 0                       | 0                 | 0                   | 0                    | 0                    | 0                | 0                           | 0               | 0           | 0          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------+--------------------------------+-----------+------------+-------------------+----------------------+----------------------+--------------+----------------------------+-------------------------+-------------------+---------------------+----------------------+----------------------+------------------+-----------------------------+-----------------+-------------+------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中 <code>HealthyNum</code> 列显示了对应的 Database 中，有多少 Tablet 处于健康状态。<code>ReplicaCompactionTooSlowNum</code> 列显示了对应的 Database 中，有多少 Tablet的 处于副本版本数过多的状态， <code>InconsistentNum</code> 列显示了对应的 Database 中，有多少 Tablet 处于副本不一致的状态。最后一行 <code>Total</code> 行对整个集群进行了统计。正常情况下 <code>TabletNum</code> 和 <code>HealthNum</code> 应该相等。如果不相等，可以进一步查看具体有哪些 Tablet。如上图中，ssb1 数据库有 1 个 Tablet 状态不健康，则可以使用以下命令查看具体是哪一个 Tablet。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SHOW PROC &#x27;/cluster_health/tablet_health/13402&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中 <code>13402</code> 为对应的 DbId。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------+--------------------------+--------------------------+------------------+--------------------------------+-----------------------------+-----------------------+-------------------------+--------------------------+--------------------------+----------------------+---------------------------------+---------------------+-----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ReplicaMissingTablets | VersionIncompleteTablets | ReplicaRelocatingTablets | RedundantTablets | ReplicaMissingInClusterTablets | ReplicaMissingForTagTablets | ForceRedundantTablets | ColocateMismatchTablets | ColocateRedundantTablets | NeedFurtherRepairTablets | UnrecoverableTablets | ReplicaCompactionTooSlowTablets | InconsistentTablets | OversizeTablets |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------+--------------------------+--------------------------+------------------+--------------------------------+-----------------------------+-----------------------+-------------------------+--------------------------+--------------------------+----------------------+---------------------------------+---------------------+-----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 14679                 |                          |                          |                  |                                |                             |                       |                         |                          |                          |                      |                                 |                     |                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------+--------------------------+--------------------------+------------------+--------------------------------+-----------------------------+-----------------------+-------------------------+--------------------------+--------------------------+----------------------+---------------------------------+---------------------+-----------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上图会显示具体的不健康的 Tablet ID（14679），该 Tablet 处于 ReplicaMissing 的状态。后面我们会介绍如何查看一个具体的 Tablet 的各个副本的状态。</p></li><li><p>表（分区）级别状态检查</p><p>用户可以通过以下命令查看指定表或分区的副本状态，并可以通过 WHERE 语句对状态进行过滤。如查看表 tbl1 中，分区 p1 和 p2 上状态为 OK 的副本：</p><p><code>ADMIN SHOW REPLICA STATUS FROM tbl1 PARTITION (p1, p2) WHERE STATUS = &quot;OK&quot;;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| TabletId | ReplicaId | BackendId | Version | LastFailedVersion | LastSuccessVersion | CommittedVersion | SchemaHash | VersionNum | IsBad | State  | Status |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502429 | 29502432  | 10006     | 2       | -1                | 2                  | 1                | -1         | 2          | false | NORMAL | OK     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502429 | 36885996  | 10002     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502429 | 48100551  | 10007     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502433 | 29502434  | 10001     | 2       | -1                | 2                  | 1                | -1         | 2          | false | NORMAL | OK     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502433 | 44900737  | 10004     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502433 | 48369135  | 10006     | 2       | -1                | -1                 | 1                | -1         | 2          | false | NORMAL | OK     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------+-----------+---------+-------------------+--------------------+------------------+------------+------------+-------+--------+--------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里会展示所有副本的状态。其中 <code>IsBad</code> 列为 <code>true</code> 则表示副本已经损坏。而 <code>Status</code> 列则会显示另外的其他状态。具体的状态说明，可以通过 <code>HELP ADMIN SHOW REPLICA STATUS;</code> 查看帮助。</p><p><code>ADMIN SHOW REPLICA STATUS</code> 命令主要用于查看副本的健康状态。用户还可以通过以下命令查看指定表中副本的一些额外信息：</p><p><code>SHOW TABLETS FROM tbl1;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| TabletId | ReplicaId | BackendId | SchemaHash | Version | VersionHash | LstSuccessVersion | LstSuccessVersionHash | LstFailedVersion | LstFailedVersionHash | LstFailedTime | DataSize | RowCount | State  | LstConsistencyCheckTime | CheckVersion |     CheckVersionHash | VersionCount | PathHash             | MetaUrl              | CompactionStatus     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502429 | 29502432  | 10006     | 1421156361 | 2       | 0           | 2                 | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -5822326203532286804 | url                  | url                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502429 | 36885996  | 10002     | 1421156361 | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -1441285706148429853 | url                  | url                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502429 | 48100551  | 10007     | 1421156361 | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | 784      | 0        | NORMAL | N/A                     | -1           |     -1               | 2            | -4784691547051455525 | url                  | url                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------+-----------+------------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+----------+----------+--------+-------------------------+--------------+----------------------+--------------+----------------------+----------------------+----------------------+  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上图展示了包括副本大小、行数、版本数量、所在数据路径等一些额外的信息。</p><blockquote><p>注：这里显示的 <code>State</code> 列的内容不代表副本的健康状态，而是副本处于某种任务下的状态，比如 CLONE、SCHEMA<!-- -->_<!-- -->CHANGE、ROLLUP 等。</p></blockquote><p>此外，用户也可以通过以下命令，查看指定表或分区的副本分布情况，来检查副本分布是否均匀。</p><p><code>ADMIN SHOW REPLICA DISTRIBUTION FROM tbl1;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+------------+-------+---------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| BackendId | ReplicaNum | Graph | Percent |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+------------+-------+---------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10000     | 7          |       | 7.29 %  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10001     | 9          |       | 9.38 %  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10002     | 7          |       | 7.29 %  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10003     | 7          |       | 7.29 %  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10004     | 9          |       | 9.38 %  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10005     | 11         | &gt;     | 11.46 % |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10006     | 18         | &gt;     | 18.75 % |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10007     | 15         | &gt;     | 15.62 % |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10008     | 13         | &gt;     | 13.54 % |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+------------+-------+---------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里分别展示了表 tbl1 的副本在各个 BE 节点上的个数、百分比，以及一个简单的图形化显示。</p></li><li><p>Tablet 级别状态检查</p><p>当我们要定位到某个具体的 Tablet 时，可以使用如下命令来查看一个具体的 Tablet 的状态。如查看 ID 为 29502553 的 tablet：</p><p><code>SHOW TABLET 29502553;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| DbName                 | TableName | PartitionName | IndexName | DbId     | TableId  | PartitionId | IndexId  | IsSync | DetailCmd                                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| default_cluster:test   | test      | test          | test      | 29502391 | 29502428 | 29502427    | 29502428 | true   | SHOW PROC &#x27;/dbs/29502391/29502428/partitions/29502427/29502428/29502553&#x27;; |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------------------+-----------+---------------+-----------+----------+----------+-------------+----------+--------+---------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上图显示了这个 tablet 所对应的数据库、表、分区、上卷表等信息。用户可以复制 <code>DetailCmd</code> 命令中的命令继续执行：</p><p><code>SHOW PROC &#x27;/dbs/29502391/29502428/partitions/29502427/29502428/29502553&#x27;;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ReplicaId | BackendId | Version | VersionHash | LstSuccessVersion | LstSuccessVersionHash | LstFailedVersion | LstFailedVersionHash | LstFailedTime | SchemaHash | DataSize | RowCount | State  | IsBad | VersionCount | PathHash             | MetaUrl  | CompactionStatus |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 43734060  | 10004     | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | -8566523878520798656 | url      | url              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 29502555  | 10002     | 2       | 0           | 2                 | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | 1885826196444191611  | url      | url              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 39279319  | 10007     | 2       | 0           | -1                | 0                     | -1               | 0                    | N/A           | -1         | 784      | 0        | NORMAL | false | 2            | 1656508631294397870  | url      | url              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+-----------+---------+-------------+-------------------+-----------------------+------------------+----------------------+---------------+------------+----------+----------+--------+-------+--------------+----------------------+----------+------------------+ </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上图显示了对应 Tablet 的所有副本情况。这里显示的内容和 <code>SHOW TABLET FROM tbl1;</code> 的内容相同。但这里可以清楚的知道，一个具体的 Tablet 的所有副本的状态。</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="副本调度任务">副本调度任务<a class="hash-link" href="#副本调度任务" title="标题的直接链接">​</a></h3><ol><li><p>查看等待被调度的任务</p><p><code>SHOW PROC &#x27;/cluster_balance/pending_tablets&#x27;;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| TabletId | Type   | Status          | State   | OrigPrio | DynmPrio | SrcBe | SrcPath | DestBe | DestPath | Timeout | Create              | LstSched            | LstVisit            | Finished | Rate | FailedSched | FailedRunning | LstAdjPrio          | VisibleVer | VisibleVerHash      | CmtVer | CmtVerHash          | ErrMsg                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 4203036  | REPAIR | REPLICA_MISSING | PENDING | HIGH     | LOW      | -1    | -1      | -1     | -1       | 0       | 2019-02-21 15:00:20 | 2019-02-24 11:18:41 | 2019-02-24 11:18:41 | N/A      | N/A  | 2           | 0             | 2019-02-21 15:00:43 | 1          | 0                   | 2      | 0                   | unable to find source replica |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+--------+-----------------+---------+----------+----------+-------+---------+--------+----------+---------+---------------------+---------------------+---------------------+----------+------+-------------+---------------+---------------------+------------+---------------------+--------+---------------------+-------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>各列的具体含义如下：</p><ul><li>TabletId：等待调度的 Tablet 的 ID。一个调度任务只针对一个 Tablet</li><li>Type：任务类型，可以是 REPAIR（修复） 或 BALANCE（均衡）</li><li>Status：该 Tablet 当前的状态，如 REPLICA<!-- -->_<!-- -->MISSING（副本缺失）</li><li>State：该调度任务的状态，可能为 PENDING/RUNNING/FINISHED/CANCELLED/TIMEOUT/UNEXPECTED</li><li>OrigPrio：初始的优先级</li><li>DynmPrio：当前动态调整后的优先级</li><li>SrcBe：源端 BE 节点的 ID</li><li>SrcPath：源端 BE 节点的路径的 hash 值</li><li>DestBe：目的端 BE 节点的 ID</li><li>DestPath：目的端 BE 节点的路径的 hash 值</li><li>Timeout：当任务被调度成功后，这里会显示任务的超时时间，单位秒</li><li>Create：任务被创建的时间</li><li>LstSched：上一次任务被调度的时间</li><li>LstVisit：上一次任务被访问的时间。这里“被访问”指包括被调度，任务执行汇报等和这个任务相关的被处理的时间点</li><li>Finished：任务结束时间</li><li>Rate：clone 任务的数据拷贝速率</li><li>FailedSched：任务调度失败的次数</li><li>FailedRunning：任务执行失败的次数</li><li>LstAdjPrio：上一次优先级调整的时间</li><li>CmtVer/CmtVerHash/VisibleVer/VisibleVerHash：用于执行 clone 任务的 version 信息</li><li>ErrMsg：任务被调度和运行过程中，出现的错误信息</li></ul></li><li><p>查看正在运行的任务</p><p><code>SHOW PROC &#x27;/cluster_balance/running_tablets&#x27;;</code></p><p>其结果中各列的含义和 <code>pending_tablets</code> 相同。</p></li><li><p>查看已结束任务</p><p><code>SHOW PROC &#x27;/cluster_balance/history_tablets&#x27;;</code></p><p>我们默认只保留最近 1000 个完成的任务。其结果中各列的含义和 <code>pending_tablets</code> 相同。如果 <code>State</code> 列为 <code>FINISHED</code>，则说明任务正常完成。如果为其他，则可以根据 <code>ErrMsg</code> 列的错误信息查看具体原因。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="集群负载及调度资源查看">集群负载及调度资源查看<a class="hash-link" href="#集群负载及调度资源查看" title="标题的直接链接">​</a></h2><ol><li><p>集群负载</p><p>通过以下命令可以查看集群当前的负载情况：</p><p><code>SHOW PROC &#x27;/cluster_balance/cluster_load_stat&#x27;;</code></p><p>首先看到的是对不同存储介质的划分：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| StorageMedium |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| HDD           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| SSD           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>点击某一种存储介质，可以看到包含该存储介质的 BE 节点的均衡状态：</p><p><code>SHOW PROC &#x27;/cluster_balance/cluster_load_stat/HDD&#x27;;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------------+-----------+---------------+----------------+-------------+------------+----------+-----------+--------------------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| BeId     | Cluster         | Available | UsedCapacity  | Capacity       | UsedPercent | ReplicaNum | CapCoeff | ReplCoeff | Score              | Class |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------------+-----------+---------------+----------------+-------------+------------+----------+-----------+--------------------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10003    | default_cluster | true      | 3477875259079 | 19377459077121 | 17.948      | 493477     | 0.5      | 0.5       | 0.9284678149967587 | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10002    | default_cluster | true      | 3607326225443 | 19377459077121 | 18.616      | 496928     | 0.5      | 0.5       | 0.948660871419998  | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10005    | default_cluster | true      | 3523518578241 | 19377459077121 | 18.184      | 545331     | 0.5      | 0.5       | 0.9843539990641831 | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10001    | default_cluster | true      | 3535547090016 | 19377459077121 | 18.246      | 558067     | 0.5      | 0.5       | 0.9981869446537612 | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10006    | default_cluster | true      | 3636050364835 | 19377459077121 | 18.764      | 547543     | 0.5      | 0.5       | 1.0011489897614072 | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10004    | default_cluster | true      | 3506558163744 | 15501967261697 | 22.620      | 468957     | 0.5      | 0.5       | 1.0228319835582569 | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10007    | default_cluster | true      | 4036460478905 | 19377459077121 | 20.831      | 551645     | 0.5      | 0.5       | 1.057279369420761  | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10000    | default_cluster | true      | 4369719923760 | 19377459077121 | 22.551      | 547175     | 0.5      | 0.5       | 1.0964036415787461 | MID   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+-----------------+-----------+---------------+----------------+-------------+------------+----------+-----------+--------------------+-------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中一些列的含义如下：</p><ul><li>Available：为 true 表示 BE 心跳正常，且没有处于下线中</li><li>UsedCapacity：字节，BE 上已使用的磁盘空间大小</li><li>Capacity：字节，BE 上总的磁盘空间大小</li><li>UsedPercent：百分比，BE 上的磁盘空间使用率</li><li>ReplicaNum：BE 上副本数量</li><li>CapCoeff/ReplCoeff：磁盘空间和副本数的权重系数</li><li>Score：负载分数。分数越高，负载越重</li><li>Class：根据负载情况分类，LOW/MID/HIGH。均衡调度会将高负载节点上的副本迁往低负载节点</li></ul><p>用户可以进一步查看某个 BE 上各个路径的使用率，比如 ID 为 10001 这个 BE：</p><p><code>SHOW PROC &#x27;/cluster_balance/cluster_load_stat/HDD/10001&#x27;;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+------------------+------------------+---------------+---------------+---------+--------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| RootPath         | DataUsedCapacity | AvailCapacity | TotalCapacity | UsedPct | State  | PathHash             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------------+------------------+---------------+---------------+---------+--------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| /home/disk4/palo | 498.757 GB       | 3.033 TB      | 3.525 TB      | 13.94 % | ONLINE | 4883406271918338267  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| /home/disk3/palo | 704.200 GB       | 2.832 TB      | 3.525 TB      | 19.65 % | ONLINE | -5467083960906519443 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| /home/disk1/palo | 512.833 GB       | 3.007 TB      | 3.525 TB      | 14.69 % | ONLINE | -7733211489989964053 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| /home/disk2/palo | 881.955 GB       | 2.656 TB      | 3.525 TB      | 24.65 % | ONLINE | 4870995507205544622  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| /home/disk5/palo | 694.992 GB       | 2.842 TB      | 3.525 TB      | 19.36 % | ONLINE | 1916696897889786739  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------------+------------------+---------------+---------------+---------+--------+----------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里显示了指定 BE 上，各个数据路径的磁盘使用率情况。</p></li><li><p>调度资源</p><p>用户可以通过以下命令，查看当前各个节点的 slot 使用情况：</p><p><code>SHOW PROC &#x27;/cluster_balance/working_slots&#x27;;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------+----------------------+------------+------------+-------------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| BeId     | PathHash             | AvailSlots | TotalSlots | BalanceSlot | AvgRate              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+----------------------+------------+------------+-------------+----------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10000    | 8110346074333016794  | 2          | 2          | 2           | 2.459007474009069E7  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10000    | -5617618290584731137 | 2          | 2          | 2           | 2.4730105014001578E7 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10001    | 4883406271918338267  | 2          | 2          | 2           | 1.6711402709780257E7 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10001    | -5467083960906519443 | 2          | 2          | 2           | 2.7540126380326536E7 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10002    | 9137404661108133814  | 2          | 2          | 2           | 2.417217089806745E7  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 10002    | 1885826196444191611  | 2          | 2          | 2           | 1.6327378456676323E7 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+----------------------+------------+------------+-------------+----------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里以数据路径为粒度，展示了当前 slot 的使用情况。其中 <code>AvgRate</code> 为历史统计的该路径上 clone 任务的拷贝速率，单位是字节/秒。</p></li><li><p>优先修复查看</p><p>以下命令，可以查看通过 <code>ADMIN REPAIR TABLE</code> 命令设置的优先修复的表或分区。</p><p><code>SHOW PROC &#x27;/cluster_balance/priority_repair&#x27;;</code></p><p>其中 <code>RemainingTimeMs</code> 表示，这些优先修复的内容，将在这个时间后，被自动移出优先修复队列。以防止优先修复一直失败导致资源被占用。</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="调度器统计状态查看">调度器统计状态查看<a class="hash-link" href="#调度器统计状态查看" title="标题的直接链接">​</a></h3><p>我们收集了 TabletChecker 和 TabletScheduler 在运行过程中的一些统计信息，可以通过以下命令查看：</p><p><code>SHOW PROC &#x27;/cluster_balance/sched_stat&#x27;;</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------+-------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Item                                              | Value       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------+-------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet check round                         | 12041       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| cost of tablet check(ms)                          | 7162342     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet checked in tablet checker           | 18793506362 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of unhealthy tablet checked in tablet checker | 7043900     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet being added to tablet scheduler     | 1153        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet schedule round                      | 49538       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| cost of tablet schedule(ms)                       | 49822       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet being scheduled                     | 4356200     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet being scheduled succeeded           | 320         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet being scheduled failed              | 4355594     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet being scheduled discard             | 286         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet priority upgraded                   | 0           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of tablet priority downgraded                 | 1096        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of clone task                                 | 230         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of clone task succeeded                       | 228         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of clone task failed                          | 2           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of clone task timeout                         | 2           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of replica missing error                      | 4354857     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of replica version missing error              | 967         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of replica relocating                         | 0           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of replica redundant error                    | 90          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of replica missing in cluster error           | 0           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| num of balance scheduled                          | 0           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------+-------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>各行含义如下：</p><ul><li>num of tablet check round：Tablet Checker 检查次数</li><li>cost of tablet check(ms)：Tablet Checker 检查总耗时</li><li>num of tablet checked in tablet checker：Tablet Checker 检查过的 tablet 数量</li><li>num of unhealthy tablet checked in tablet checker：Tablet Checker 检查过的不健康的 tablet 数量</li><li>num of tablet being added to tablet scheduler：被提交到 Tablet Scheduler 中的 tablet 数量</li><li>num of tablet schedule round：Tablet Scheduler 运行次数</li><li>cost of tablet schedule(ms)：Tablet Scheduler 运行总耗时</li><li>num of tablet being scheduled：被调度的 Tablet 总数量</li><li>num of tablet being scheduled succeeded：被成功调度的 Tablet 总数量</li><li>num of tablet being scheduled failed：调度失败的 Tablet 总数量</li><li>num of tablet being scheduled discard：调度失败且被抛弃的 Tablet 总数量</li><li>num of tablet priority upgraded：优先级上调次数</li><li>num of tablet priority downgraded：优先级下调次数</li><li>num of clone task：生成的 clone 任务数量</li><li>num of clone task succeeded：clone 任务成功的数量</li><li>num of clone task failed：clone 任务失败的数量</li><li>num of clone task timeout：clone 任务超时的数量</li><li>num of replica missing error：检查的状态为副本缺失的 tablet 的数量</li><li>num of replica version missing error：检查的状态为版本缺失的 tablet 的数量（该统计值包括了 num of replica relocating 和 num of replica missing in cluster error）</li><li>num of replica relocating：检查的状态为 replica relocating 的 tablet 的数量</li><li>num of replica redundant error：检查的状态为副本冗余的 tablet 的数量</li><li>num of replica missing in cluster error：检查的状态为不在对应 cluster 的 tablet 的数量</li><li>num of balance scheduled：均衡调度的次数</li></ul><blockquote><p>注：以上状态都只是历史累加值。我们也在 FE 的日志中，定期打印了这些统计信息，其中括号内的数值表示自上次统计信息打印依赖，各个统计值的变化数量。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="相关配置说明">相关配置说明<a class="hash-link" href="#相关配置说明" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="可调整参数">可调整参数<a class="hash-link" href="#可调整参数" title="标题的直接链接">​</a></h3><p>以下可调整参数均为 fe.conf 中可配置参数。</p><ul><li><p>use<!-- -->_<!-- -->new<!-- -->_<!-- -->tablet<!-- -->_<!-- -->scheduler</p><ul><li>说明：是否启用新的副本调度方式。新的副本调度方式即本文档介绍的副本调度方式。</li><li>默认值：true</li><li>重要性：高</li></ul></li><li><p>tablet<!-- -->_<!-- -->repair<!-- -->_<!-- -->delay<!-- -->_<!-- -->factor<!-- -->_<!-- -->second</p><ul><li>说明：对于不同的调度优先级，我们会延迟不同的时间后开始修复。以防止因为例行重启、升级等过程中，产生大量不必要的副本修复任务。此参数为一个基准系数。对于 HIGH 优先级，延迟为 基准系数 <em> 1；对于 NORMAL 优先级，延迟为 基准系数 </em> 2；对于 LOW 优先级，延迟为 基准系数 * 3。即优先级越低，延迟等待时间越长。如果用户想尽快修复副本，可以适当降低该参数。</li><li>默认值：60秒</li><li>重要性：高</li></ul></li><li><p>schedule<!-- -->_<!-- -->slot<!-- -->_<!-- -->num<!-- -->_<!-- -->per<!-- -->_<!-- -->path</p><ul><li>说明：默认分配给每块磁盘用于副本修复的 slot 数目。该数目表示一块磁盘能同时运行的副本修复任务数。如果想以更快的速度修复副本，可以适当调高这个参数。单数值越高，可能对 IO 影响越大。</li><li>默认值：2</li><li>重要性：高</li></ul></li><li><p>balance<!-- -->_<!-- -->load<!-- -->_<!-- -->score<!-- -->_<!-- -->threshold</p><ul><li>说明：集群均衡的阈值。默认为 0.1，即 10%。当一个 BE 节点的 load score，不高于或不低于平均 load score 的 10% 时，我们认为这个节点是均衡的。如果想让集群负载更加平均，可以适当调低这个参数。</li><li>默认值：0.1</li><li>重要性：中</li></ul></li><li><p>storage<!-- -->_<!-- -->high<!-- -->_<!-- -->watermark<!-- -->_<!-- -->usage<!-- -->_<!-- -->percent 和 storage<!-- -->_<!-- -->min<!-- -->_<!-- -->left<!-- -->_<!-- -->capacity<!-- -->_<!-- -->bytes</p><ul><li>说明：这两个参数，分别表示一个磁盘的最大空间使用率上限，以及最小的空间剩余下限。当一块磁盘的空间使用率大于上限，或者剩余空间小于下限时，该磁盘将不再作为均衡调度的目的地址。</li><li>默认值：0.85 和 1048576000 （1GB）</li><li>重要性：中</li></ul></li><li><p>disable<!-- -->_<!-- -->balance</p><ul><li>说明：控制是否关闭均衡功能。当副本处于均衡过程中时，有些功能，如 ALTER TABLE 等将会被禁止。而均衡可能持续很长时间。因此，如果用户希望尽快进行被禁止的操作。可以将该参数设为 true，以关闭均衡调度。</li><li>默认值：false</li><li>重要性：中</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="不可调整参数">不可调整参数<a class="hash-link" href="#不可调整参数" title="标题的直接链接">​</a></h3><p>以下参数暂不支持修改，仅作说明。</p><ul><li><p>TabletChecker 调度间隔</p><p>  TabletChecker 每20秒进行一次检查调度。
</p></li><li><p>TabletScheduler 调度间隔</p><p>  TabletScheduler 每5秒进行一次调度
</p></li><li><p>TabletScheduler 每批次调度个数</p><p>  TabletScheduler 每次调度最多 50 个 tablet。
</p></li><li><p>TabletScheduler 最大等待调度和运行中任务数</p><p>  最大等待调度任务数和运行中任务数为 2000。当超过 2000 后，TabletChecker 将不再产生新的调度任务给 TabletScheduler。
</p></li><li><p>TabletScheduler 最大均衡任务数</p><p>  最大均衡任务数为 500。当超过 500 后，将不再产生新的均衡任务。
</p></li><li><p>每块磁盘用于均衡任务的 slot 数目</p><p>  每块磁盘用于均衡任务的 slot 数目为2。这个 slot 独立于用于副本修复的 slot。
</p></li><li><p>集群均衡情况更新间隔</p><p>  TabletScheduler 每隔 20 秒会重新计算一次集群的 load score。
</p></li><li><p>Clone 任务的最小和最大超时时间</p><p>  一个 clone 任务超时时间范围是 3min ~ 2hour。具体超时时间通过 tablet 的大小计算。计算公式为 (tablet size) / (5MB/s)。当一个 clone 任务运行失败 3 次后，该任务将终止。
</p></li><li><p>动态优先级调整策略</p><p>  优先级最小调整间隔为 5min。当一个 tablet 调度失败5次后，会调低优先级。当一个 tablet 30min 未被调度时，会调高优先级。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="相关问题">相关问题<a class="hash-link" href="#相关问题" title="标题的直接链接">​</a></h2><ul><li><p>在某些情况下，默认的副本修复和均衡策略可能会导致网络被打满（多发生在千兆网卡，且每台 BE 的磁盘数量较多的情况下）。此时需要调整一些参数来减少同时进行的均衡和修复任务数。</p></li><li><p>目前针对 Colocate Table 的副本的均衡策略无法保证同一个 Tablet 的副本不会分布在同一个 host 的 BE 上。但 Colocate Table 的副本的修复策略会检测到这种分布错误并校正。但可能会出现，校正后，均衡策略再次认为副本不均衡而重新均衡。从而导致在两种状态间不停交替，无法使 Colocate Group 达成稳定。针对这种情况，我们建议在使用 Colocate 属性时，尽量保证集群是同构的，以减小副本分布在同一个 host 上的概率。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="最佳实践">最佳实践<a class="hash-link" href="#最佳实践" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="控制并管理集群的副本修复和均衡进度">控制并管理集群的副本修复和均衡进度<a class="hash-link" href="#控制并管理集群的副本修复和均衡进度" title="标题的直接链接">​</a></h3><p>在大多数情况下，通过默认的参数配置，Doris 都可以自动的进行副本修复和集群均衡。但是某些情况下，我们需要通过人工介入调整参数，来达到一些特殊的目的。如优先修复某个表或分区、禁止集群均衡以降低集群负载、优先修复非 colocation 的表数据等等。</p><p>本小节主要介绍如何通过修改参数，来控制并管理集群的副本修复和均衡进度。</p><ol><li><p>删除损坏副本</p><p>某些情况下，Doris 可能无法自动检测某些损坏的副本，从而导致查询或导入在损坏的副本上频繁报错。此时我们需要手动删除已损坏的副本。该方法可以适用于：删除版本数过高导致 -235 错误的副本、删除文件已损坏的副本等等。</p><p>首先，找到副本对应的 tablet id，假设为 10001。通过 <code>show tablet 10001;</code> 并执行其中的 <code>show proc</code> 语句可以查看对应的 tablet 的各个副本详情。</p><p>假设需要删除的副本的 backend id 是 20001。则执行以下语句将副本标记为 <code>bad</code>：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADMIN SET REPLICA STATUS PROPERTIES(&quot;tablet_id&quot; = &quot;10001&quot;, &quot;backend_id&quot; = &quot;20001&quot;, &quot;status&quot; = &quot;bad&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此时，再次通过 <code>show proc</code> 语句可以看到对应的副本的 <code>IsBad</code> 列值为 <code>true</code>。</p><p>被标记为 <code>bad</code> 的副本不会再参与导入和查询。同时副本修复逻辑会自动补充一个新的副本。</p></li><li><p>优先修复某个表或分区</p><p><code>help admin repair table;</code> 查看帮助。该命令会尝试优先修复指定表或分区的tablet。</p></li><li><p>停止均衡任务</p><p>均衡任务会占用一定的网络带宽和IO资源。如果希望停止新的均衡任务的产生，可以通过以下命令：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADMIN SET FRONTEND CONFIG (&quot;disable_balance&quot; = &quot;true&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>停止所有副本调度任务</p><p>副本调度任务包括均衡和修复任务。这些任务都会占用一定的网络带宽和IO资源。可以通过以下命令停止所有副本调度任务（不包括已经在运行的，包括 colocation 表和普通表）：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADMIN SET FRONTEND CONFIG (&quot;disable_tablet_scheduler&quot; = &quot;true&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>停止所有 colocation 表的副本调度任务。</p><p>colocation 表的副本调度和普通表是分开独立运行的。某些情况下，用户可能希望先停止对 colocation 表的均衡和修复工作，而将集群资源用于普通表的修复，则可以通过以下命令：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADMIN SET FRONTEND CONFIG (&quot;disable_colocate_balance&quot; = &quot;true&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>使用更保守的策略修复副本</p><p>Doris 在检测到副本缺失、BE宕机等情况下，会自动修复副本。但为了减少一些抖动导致的错误（如BE短暂宕机），Doris 会延迟触发这些任务。</p><ul><li><code>tablet_repair_delay_factor_second</code> 参数。默认 60 秒。根据修复任务优先级的不同，会推迟 60秒、120秒、180秒后开始触发修复任务。可以通过以下命令延长这个时间，这样可以容忍更长的异常时间，以避免触发不必要的修复任务：</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADMIN SET FRONTEND CONFIG (&quot;tablet_repair_delay_factor_second&quot; = &quot;120&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>使用更保守的策略触发 colocation group 的重分布</p><p>colocation group 的重分布可能伴随着大量的 tablet 迁移。<code>colocate_group_relocate_delay_second</code> 用于控制重分布的触发延迟。默认 1800秒。如果某台 BE 节点可能长时间下线，可以尝试调大这个参数，以避免不必要的重分布：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADMIN SET FRONTEND CONFIG (&quot;colocate_group_relocate_delay_second&quot; = &quot;3600&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>更快速的副本均衡</p><p>Doris 的副本均衡逻辑会先增加一个正常副本，然后在删除老的副本，已达到副本迁移的目的。而在删除老副本时，Doris会等待这个副本上已经开始执行的导入任务完成，以避免均衡任务影响导入任务。但这样会降低均衡逻辑的执行速度。此时可以通过修改以下参数，让 Doris 忽略这个等待，直接删除老副本：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADMIN SET FRONTEND CONFIG (&quot;enable_force_drop_redundant_replica&quot; = &quot;true&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这种操作可能会导致均衡期间部分导入任务失败（需要重试），但会显著加速均衡速度。</p></li></ol><p>总体来讲，当我们需要将集群快速恢复到正常状态时，可以考虑按照以下思路处理：</p><ol><li>找到导致高优任务报错的tablet，将有问题的副本置为 bad。</li><li>通过 <code>admin repair</code> 语句高优修复某些表。</li><li>停止副本均衡逻辑以避免占用集群资源，等集群恢复后，再开启即可。</li><li>使用更保守的策略触发修复任务，以应对 BE 频繁宕机导致的雪崩效应。</li><li>按需关闭 colocation 表的调度任务，集中集群资源修复其他高优数据。</li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-CN/docs/admin-manual/maint-monitor/tablet-meta-tool"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Tablet 元数据管理工具</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-CN/docs/admin-manual/maint-monitor/tablet-restore-tool"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Tablet 恢复工具</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#名词解释" class="table-of-contents__link toc-highlight">名词解释</a></li><li><a href="#副本状态" class="table-of-contents__link toc-highlight">副本状态</a></li><li><a href="#副本修复" class="table-of-contents__link toc-highlight">副本修复</a><ul><li><a href="#调度优先级" class="table-of-contents__link toc-highlight">调度优先级</a></li><li><a href="#手动优先级" class="table-of-contents__link toc-highlight">手动优先级</a></li><li><a href="#优先级调度" class="table-of-contents__link toc-highlight">优先级调度</a></li></ul></li><li><a href="#副本均衡" class="table-of-contents__link toc-highlight">副本均衡</a><ul><li><a href="#负载均衡" class="table-of-contents__link toc-highlight">负载均衡</a></li><li><a href="#分区均衡" class="table-of-contents__link toc-highlight">分区均衡</a></li><li><a href="#均衡策略" class="table-of-contents__link toc-highlight">均衡策略</a></li></ul></li><li><a href="#资源控制" class="table-of-contents__link toc-highlight">资源控制</a></li><li><a href="#副本状态查看" class="table-of-contents__link toc-highlight">副本状态查看</a><ul><li><a href="#副本状态-1" class="table-of-contents__link toc-highlight">副本状态</a></li><li><a href="#副本调度任务" class="table-of-contents__link toc-highlight">副本调度任务</a></li></ul></li><li><a href="#集群负载及调度资源查看" class="table-of-contents__link toc-highlight">集群负载及调度资源查看</a><ul><li><a href="#调度器统计状态查看" class="table-of-contents__link toc-highlight">调度器统计状态查看</a></li></ul></li><li><a href="#相关配置说明" class="table-of-contents__link toc-highlight">相关配置说明</a><ul><li><a href="#可调整参数" class="table-of-contents__link toc-highlight">可调整参数</a></li><li><a href="#不可调整参数" class="table-of-contents__link toc-highlight">不可调整参数</a></li></ul></li><li><a href="#相关问题" class="table-of-contents__link toc-highlight">相关问题</a></li><li><a href="#最佳实践" class="table-of-contents__link toc-highlight">最佳实践</a><ul><li><a href="#控制并管理集群的副本修复和均衡进度" class="table-of-contents__link toc-highlight">控制并管理集群的副本修复和均衡进度</a></li></ul></li></ul></div></div></div></div></main></div></div><div class="footer"><div class="container"><div class="footer-box"><div class="left"><img src="/zh-CN/images/asf_logo_apache.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/zh-CN/images/asf_logo_apache.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">资源</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh-CN/download">下载</a></li><li class="footer__item"><a class="footer__link-item" href="/zh-CN/learning">文档</a></li></ul></div><div class="col footer__col"><div class="footer__title">ASF</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">基金会<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="footer__link-item">版权<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="footer__link-item">活动<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">捐赠<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">隐私<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">鸣谢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">语言</div><ul class="footer__items clean-list"><li class="footer__item"><a href="/docs/admin-manual/maint-monitor/tablet-repair-and-balance" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link footer__link-item">English</a></li><li class="footer__item"><a href="/zh-CN/docs/admin-manual/maint-monitor/tablet-repair-and-balance" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link footer__link-item">简体中文</a></li></ul></div></div></div><div class="right"><div class="footer__title">分享</div><div class="social-list"><div class="social"><a href="mailto:dev@doris.apache.org" title="mail" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.6003 6H26.3997C27.8186 6 28.982 7.10964 29 8.46946L16.0045 15.454L3.01202 8.47829C3.02405 7.11258 4.1784 6 5.6003 6ZM3.01202 11.1508L3 23.5011C3 24.8756 4.16938 26 5.6003 26H26.3997C27.8306 26 29 24.8756 29 23.5011V11.145L16.3111 17.8028C16.1157 17.9058 15.8813 17.9058 15.6889 17.8028L3.01202 11.1508V11.1508Z" fill="currentColor"></path></svg></a><a href="https://github.com/apache/doris" title="github" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0001 2.66675C8.63342 2.66675 2.66675 8.63341 2.66675 16.0001C2.66524 18.7991 3.54517 21.5276 5.1817 23.7983C6.81824 26.0691 9.12828 27.7668 11.7841 28.6508C12.4508 28.7668 12.7001 28.3668 12.7001 28.0161C12.7001 27.7001 12.6828 26.6508 12.6828 25.5334C9.33342 26.1508 8.46675 24.7174 8.20008 23.9668C8.04942 23.5828 7.40008 22.4001 6.83342 22.0828C6.36675 21.8334 5.70008 21.2161 6.81608 21.2001C7.86675 21.1828 8.61608 22.1668 8.86675 22.5668C10.0668 24.5828 11.9841 24.0161 12.7494 23.6668C12.8668 22.8001 13.2161 22.2174 13.6001 21.8841C10.6334 21.5508 7.53342 20.4001 7.53342 15.3001C7.53342 13.8494 8.04942 12.6507 8.90008 11.7161C8.76675 11.3827 8.30008 10.0161 9.03342 8.18275C9.03342 8.18275 10.1494 7.83342 12.7001 9.55075C13.7855 9.2495 14.907 9.09787 16.0334 9.10008C17.1668 9.10008 18.3001 9.24942 19.3668 9.54942C21.9161 7.81608 23.0334 8.18408 23.0334 8.18408C23.7668 10.0174 23.3001 11.3841 23.1668 11.7174C24.0161 12.6507 24.5334 13.8334 24.5334 15.3001C24.5334 20.4174 21.4174 21.5508 18.4508 21.8841C18.9334 22.3001 19.3508 23.1001 19.3508 24.3508C19.3508 26.1334 19.3334 27.5668 19.3334 28.0174C19.3334 28.3668 19.5841 28.7828 20.2508 28.6494C22.8975 27.7558 25.1973 26.0547 26.8266 23.7856C28.4559 21.5165 29.3327 18.7936 29.3334 16.0001C29.3334 8.63341 23.3668 2.66675 16.0001 2.66675V2.66675Z" fill="currentColor"></path></svg></a><a href="https://twitter.com/doris_apache" title="twitter" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M27.1493 10.8313C27.1493 10.5687 27.1442 10.3091 27.1326 10.0512C28.2554 9.21471 29.2295 8.1676 30 6.96938C28.9537 7.44012 27.8403 7.74469 26.7 7.8721C27.8868 7.14188 28.7969 5.97403 29.227 4.57256C28.1158 5.24638 26.8867 5.72811 25.5798 5.97912C24.5326 4.78777 23.0383 4.02895 21.3864 4.00076C18.2137 3.94831 15.6418 6.62904 15.6418 9.98754C15.6418 10.4649 15.6918 10.9279 15.7909 11.3749C11.0133 11.0675 6.77972 8.58103 3.9478 4.8326C3.45367 5.73067 3.17017 6.78025 3.17017 7.90503C3.17017 10.0324 4.18438 11.9232 5.72536 13.039C4.78198 12.9963 3.89827 12.7106 3.12316 12.2422V12.3204C3.12316 15.2937 5.10395 17.7849 7.73223 18.3661C7.2504 18.5032 6.74218 18.5745 6.2195 18.5719C5.85634 18.57 5.49437 18.5304 5.13941 18.4536C5.86973 20.8902 7.99227 22.6703 10.5051 22.7297C8.53846 24.3601 6.06106 25.334 3.37133 25.3272C2.90757 25.3272 2.44929 25.2961 2 25.2397C4.54329 26.9841 7.56224 28 10.8076 28C21.3719 28.0025 27.1493 18.8084 27.1493 10.8313V10.8313Z" fill="currentColor"></path></svg></a></div><div class="social"><a href="https://join.slack.com/t/apachedoriscommunity/shared_invite/zt-1h153f1ar-sTJB_QahY1SHvZdtPFoIOQ" title="slack" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_125_278)"><path d="M12.5875 16.6906C11.0844 16.6906 9.86562 17.9094 9.86562 19.4125V26.2375C9.86562 26.9594 10.1524 27.6517 10.6628 28.1622C11.1733 28.6726 11.8656 28.9594 12.5875 28.9594C13.3094 28.9594 14.0017 28.6726 14.5122 28.1622C15.0226 27.6517 15.3094 26.9594 15.3094 26.2375V19.4531C15.3094 17.9094 14.0906 16.6906 12.5875 16.6906ZM3 19.4531C3 20.175 3.28677 20.8673 3.79722 21.3778C4.30767 21.8882 4.99999 22.175 5.72187 22.175C6.44376 22.175 7.13608 21.8882 7.64653 21.3778C8.15698 20.8673 8.44375 20.175 8.44375 19.4531V16.7312H5.7625C4.25938 16.6906 3 17.9094 3 19.4531ZM12.5875 3C11.8656 3 11.1733 3.28677 10.6628 3.79722C10.1524 4.30767 9.86562 4.99999 9.86562 5.72187C9.86562 6.44376 10.1524 7.13608 10.6628 7.64653C11.1733 8.15698 11.8656 8.44375 12.5875 8.44375H15.3094V5.72187C15.3094 4.21875 14.0906 3 12.5875 3ZM5.72187 15.3094H12.5469C13.2688 15.3094 13.9611 15.0226 14.4715 14.5122C14.982 14.0017 15.2688 13.3094 15.2688 12.5875C15.2688 11.8656 14.982 11.1733 14.4715 10.6628C13.9611 10.1524 13.2688 9.86562 12.5469 9.86562H5.72187C4.99999 9.86562 4.30767 10.1524 3.79722 10.6628C3.28677 11.1733 3 11.8656 3 12.5875C3 13.3094 3.28677 14.0017 3.79722 14.5122C4.30767 15.0226 4.99999 15.3094 5.72187 15.3094ZM26.2375 9.86562C24.7344 9.86562 23.5156 11.0844 23.5156 12.5875V15.3094H26.2375C26.9594 15.3094 27.6517 15.0226 28.1622 14.5122C28.6726 14.0017 28.9594 13.3094 28.9594 12.5875C28.9594 11.8656 28.6726 11.1733 28.1622 10.6628C27.6517 10.1524 26.9594 9.86562 26.2375 9.86562ZM16.6906 5.72187V12.5875C16.6906 13.3094 16.9774 14.0017 17.4878 14.5122C17.9983 15.0226 18.6906 15.3094 19.4125 15.3094C20.1344 15.3094 20.8267 15.0226 21.3372 14.5122C21.8476 14.0017 22.1344 13.3094 22.1344 12.5875V5.72187C22.1344 4.99999 21.8476 4.30767 21.3372 3.79722C20.8267 3.28677 20.1344 3 19.4125 3C18.6906 3 17.9983 3.28677 17.4878 3.79722C16.9774 4.30767 16.6906 4.99999 16.6906 5.72187ZM22.1344 26.2781C22.1344 24.775 20.9156 23.5562 19.4125 23.5562H16.6906V26.2781C16.6906 27 16.9774 27.6923 17.4878 28.2028C17.9983 28.7132 18.6906 29 19.4125 29C20.1344 29 20.8267 28.7132 21.3372 28.2028C21.8476 27.6923 22.1344 27 22.1344 26.2781ZM26.2781 16.6906H19.4125C18.6906 16.6906 17.9983 16.9774 17.4878 17.4878C16.9774 17.9983 16.6906 18.6906 16.6906 19.4125C16.6906 20.1344 16.9774 20.8267 17.4878 21.3372C17.9983 21.8476 18.6906 22.1344 19.4125 22.1344H26.2375C27.7406 22.1344 28.9594 20.9156 28.9594 19.4125C29 17.9094 27.7812 16.6906 26.2781 16.6906Z" fill="currentColor"></path></g><defs><clipPath id="clip0_125_278"><rect width="26" height="26" fill="currentColor" transform="translate(3 3)"></rect></clipPath></defs></svg></a><a href="https://space.bilibili.com/362350065" title="bilibili" class="item"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.0533 11.5412H9.14591C8.72353 11.5412 8.36784 11.8633 8.36784 12.296V21.5162C8.36784 21.9489 8.72349 22.2665 9.14591 22.2665H23.0533C23.4757 22.2665 23.7928 21.949 23.7928 21.5162V12.296C23.7928 11.8633 23.4757 11.5412 23.0533 11.5412ZM10.0928 14.9479L14.0122 14.1975L14.3083 15.6685L10.4284 16.4188L10.0928 14.9479ZM16.1348 19.4301C14.9303 20.7431 13.6667 19.0155 13.6667 19.0155L14.3084 18.6008C14.3084 18.6008 15.1673 20.1508 16.125 18.0973C17.0432 20.0916 18.06 18.6206 18.06 18.6304L18.6426 19.0057C18.6426 19.0057 17.5565 20.7431 16.1348 19.4301ZM21.9498 16.4189L18.06 15.6686L18.3661 14.1976L22.2756 14.948L21.9498 16.4189Z" fill="currentColor"></path><path d="M16 2C8.26801 2 2 8.26805 2 16C2 23.7319 8.26806 30 16 30C23.7319 30 30 23.7319 30 16C30 8.26801 23.732 2 16 2ZM23.3727 24.1329C22.3941 24.1019 22.0644 24.1329 22.0644 24.1329C22.0644 24.1329 21.9923 25.2558 21.0343 25.2764C20.0659 25.2867 19.9216 24.4934 19.8907 24.1947C19.3035 24.1947 12.2467 24.2255 12.2467 24.2255C12.2467 24.2255 12.1231 25.266 11.165 25.266C10.1967 25.266 10.1451 24.4006 10.0833 24.2255C9.45486 24.2255 8.6101 24.2049 8.6101 24.2049C8.6101 24.2049 6.48791 23.7621 6.20978 21.0012C6.24067 18.2402 6.20978 12.7801 6.20978 12.7801C6.20978 12.7801 6.01404 10.2356 8.54836 9.50415C9.33118 9.4733 11.0208 9.46293 12.9781 9.46293L11.1753 7.71159C11.1753 7.71159 10.8971 7.36131 11.371 6.96986C11.8553 6.57846 11.8757 6.73797 12.0406 6.85128C12.2055 6.96456 14.7295 9.45229 14.7295 9.45229H14.3895C15.3579 9.45229 16.3572 9.46799 17.3152 9.46799C17.686 9.09711 19.798 7.02903 19.9422 6.92612C20.107 6.82309 20.1378 6.64927 20.6118 7.04068C21.0857 7.43213 20.8075 7.78309 20.8075 7.78309L19.0459 9.48322C21.4668 9.50386 23.3315 9.51423 23.3315 9.51423C23.3315 9.51423 25.7214 10.0398 25.7833 12.78C25.7524 15.5203 25.7936 21.0319 25.7936 21.0319C25.7936 21.0319 25.6598 23.7104 23.3727 24.1329Z" fill="currentColor"></path></svg></a><a class="item wechat"><svg width="2em" height="2em" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.7578 11.5169C21.0708 11.5169 21.3795 11.5398 21.6851 11.573C20.8524 7.73517 16.7052 4.88306 11.9718 4.88306C6.67951 4.88306 2.34412 8.45283 2.34412 12.9854C2.34412 15.6013 3.78679 17.7498 6.19667 19.4161L5.2339 22.2827L8.59917 20.6122C9.80411 20.8478 10.7698 21.0906 11.9718 21.0906C12.2738 21.0906 12.5728 21.0759 12.8703 21.0523C12.682 20.4159 12.5728 19.7485 12.5728 19.0566C12.5728 14.8947 16.1847 11.5169 20.7578 11.5169ZM15.5822 8.9335C16.3072 8.9335 16.7871 9.40601 16.7871 10.1229C16.7871 10.8369 16.3072 11.3153 15.5822 11.3153C14.8601 11.3153 14.1365 10.8369 14.1365 10.1229C14.1365 9.40601 14.8601 8.9335 15.5822 8.9335ZM8.84429 11.3153C8.12218 11.3153 7.3942 10.8368 7.3942 10.1229C7.3942 9.40597 8.12218 8.93346 8.84429 8.93346C9.56559 8.93346 10.0463 9.40597 10.0463 10.1229C10.0463 10.8369 9.56559 11.3153 8.84429 11.3153ZM29.5453 18.9422C29.5453 15.1332 25.6935 12.0285 21.3677 12.0285C16.7871 12.0285 13.1797 15.1332 13.1797 18.9422C13.1797 22.7567 16.7871 25.8547 21.3677 25.8547C22.326 25.8547 23.2932 25.6169 24.2559 25.3777L26.897 26.8086L26.1726 24.4282C28.1056 22.993 29.5453 21.0906 29.5453 18.9422ZM18.7126 17.7498C18.2335 17.7498 17.7499 17.278 17.7499 16.7966C17.7499 16.3219 18.2335 15.8442 18.7126 15.8442C19.4406 15.8442 19.9176 16.3219 19.9176 16.7966C19.9176 17.278 19.4406 17.7498 18.7126 17.7498ZM24.0079 17.7498C23.5324 17.7498 23.0518 17.278 23.0518 16.7966C23.0518 16.3219 23.5324 15.8442 24.0079 15.8442C24.73 15.8442 25.2128 16.3219 25.2128 16.7966C25.2128 17.278 24.73 17.7498 24.0079 17.7498Z" fill="currentColor"></path></svg><div class="wechat-dropdown"><img src="data:image/png;base64,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" alt=""></div></a></div></div></div></div><div class="footer__copyright">Copyright © 2022 The Apache Software Foundation,Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License, Version 2.0</a>. Apache, Doris, Apache Doris, the Apache feather logo and the Apache Doris logo are trademarks of The Apache Software Foundation.</div></div></div></div>
<script src="https://cdn-tencent.selectdb.com/zh-CN/assets/js/runtime~main.676b2202.js"></script>
<script src="https://cdn-tencent.selectdb.com/zh-CN/assets/js/main.04a0b470.js"></script>
</body>
</html>