"use strict";(self.webpackChunkselectdb_portal=self.webpackChunkselectdb_portal||[]).push([[50823],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>E});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=n.createContext({}),c=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},O=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(r),O=a,E=u["".concat(i,".").concat(O)]||u[O]||d[O]||o;return r?n.createElement(E,s(s({ref:t},p),{},{components:r})):n.createElement(E,s({ref:t},p))}));function E(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=O;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[u]="string"==typeof e?e:a,s[1]=l;for(var c=2;c<o;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}O.displayName="MDXCreateElement"},92971:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=r(87462),a=(r(67294),r(3905));const o={title:"CREATE-REPOSITORY",language:"en"},s=void 0,l={unversionedId:"sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY",id:"sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY",title:"CREATE-REPOSITORY",description:"\x3c!--",source:"@site/docs/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY.md",sourceDirName:"sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore",slug:"/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY",permalink:"/docs/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CREATE-REPOSITORY",draft:!1,tags:[],version:"current",frontMatter:{title:"CREATE-REPOSITORY",language:"en"},sidebar:"docs",previous:{title:"CANCEL-RESTORE",permalink:"/docs/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/CANCEL-RESTORE"},next:{title:"DROP-REPOSITORY",permalink:"/docs/sql-manual/sql-reference/Data-Definition-Statements/Backup-and-Restore/DROP-REPOSITORY"}},i={},c=[{value:"CREATE-REPOSITORY",id:"create-repository",level:2},{value:"Name",id:"name",level:3},{value:"Description",id:"description",level:3},{value:"Example",id:"example",level:3},{value:"Keywords",id:"keywords",level:3},{value:"Best Practice",id:"best-practice",level:3}],p={toc:c};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"create-repository"},"CREATE-REPOSITORY"),(0,a.kt)("h3",{id:"name"},"Name"),(0,a.kt)("p",null,"CREATE REPOSITORY"),(0,a.kt)("h3",{id:"description"},"Description"),(0,a.kt)("p",null,"This statement is used to create a repository. Repositories are used for backup or restore. Only root or superuser users can create repositories."),(0,a.kt)("p",null,"grammar:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE [READ ONLY] REPOSITORY `repo_name`\nWITH [BROKER `broker_name`|S3|hdfs]\nON LOCATION `repo_location`\nPROPERTIES ("key"="value", ...);\n')),(0,a.kt)("p",null,"illustrate:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Creation of repositories, relying on existing brokers or accessing cloud storage directly through AWS s3 protocol, or accessing HDFS directly."),(0,a.kt)("li",{parentName:"ul"},"If it is a read-only repository, restores can only be done on the repository. If not, backup and restore operations are available."),(0,a.kt)("li",{parentName:"ul"},"PROPERTIES are different according to different types of broker or S3 or hdfs, see the example for details."),(0,a.kt)("li",{parentName:"ul"},"ON LOCATION \uff1a if it is S3 , here followed by the Bucket Name.")),(0,a.kt)("h3",{id:"example"},"Example"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'Create a warehouse named bos_repo, rely on BOS broker "bos_broker", and the data root directory is: bos://palo_backup')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE REPOSITORY `bos_repo`\nWITH BROKER `bos_broker`\nON LOCATION "bos://palo_backup"\nPROPERTIES\n(\n    "bos_endpoint" = "http://gz.bcebos.com",\n    "bos_accesskey" = "bos_accesskey",\n    "bos_secret_accesskey"="bos_secret_accesskey"\n);\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Create the same repository as Example 1, but with read-only properties:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE READ ONLY REPOSITORY `bos_repo`\nWITH BROKER `bos_broker`\nON LOCATION "bos://palo_backup"\nPROPERTIES\n(\n    "bos_endpoint" = "http://gz.bcebos.com",\n    "bos_accesskey" = "bos_accesskey",\n    "bos_secret_accesskey"="bos_accesskey"\n);\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},'Create a warehouse named hdfs_repo, rely on Baidu hdfs broker "hdfs_broker", the data root directory is: hdfs://hadoop-name-node:54310/path/to/repo/')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE REPOSITORY `hdfs_repo`\nWITH BROKER `hdfs_broker`\nON LOCATION "hdfs://hadoop-name-node:54310/path/to/repo/"\nPROPERTIES\n(\n    "username" = "user",\n    "password" = "password"\n);\n')),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Create a repository named s3_repo to link cloud storage directly without going through the broker.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE REPOSITORY `s3_repo`\nWITH S3\nON LOCATION "s3://s3-repo"\nPROPERTIES\n(\n    "AWS_ENDPOINT" = "http://s3-REGION.amazonaws.com",\n    "AWS_ACCESS_KEY" = "AWS_ACCESS_KEY",\n    "AWS_SECRET_KEY"="AWS_SECRET_KEY",\n    "AWS_REGION" = "REGION"\n);\n')),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Create a repository named hdfs_repo to link HDFS directly without going through the broker.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE REPOSITORY `hdfs_repo`\nWITH hdfs\nON LOCATION "hdfs://hadoop-name-node:54310/path/to/repo/"\nPROPERTIES\n(\n    "fs.defaultFS"="hdfs://hadoop-name-node:54310",\n    "hadoop.username"="user"\n);\n\n### Keywords\n\n')),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},"Create a repository named minio_repo to link minio storage directly through the s3 protocol.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'CREATE REPOSITORY `minio_repo`\nWITH S3\nON LOCATION "s3://minio_repo"\nPROPERTIES\n(\n    "AWS_ENDPOINT" = "http://minio.com",\n    "AWS_ACCESS_KEY" = "MINIO_USER",\n    "AWS_SECRET_KEY"="MINIO_PASSWORD",\n    "AWS_REGION" = "REGION",\n    "use_path_style" = "true"\n);\n')),(0,a.kt)("h3",{id:"keywords"},"Keywords"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"CREATE, REPOSITORY\n")),(0,a.kt)("h3",{id:"best-practice"},"Best Practice"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"A cluster can create multiple warehouses. Only users with ADMIN privileges can create repositories."),(0,a.kt)("li",{parentName:"ol"},"Any user can view the created repositories through the ",(0,a.kt)("a",{parentName:"li",href:"/docs/sql-manual/sql-reference/Show-Statements/SHOW-REPOSITORIES"},"SHOW REPOSITORIES")," command."),(0,a.kt)("li",{parentName:"ol"},"When performing data migration operations, it is necessary to create the exact same warehouse in the source cluster and the destination cluster, so that the destination cluster can view the data snapshots backed up by the source cluster through this warehouse.")))}u.isMDXComponent=!0}}]);