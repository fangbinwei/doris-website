"use strict";(self.webpackChunkselectdb_portal=self.webpackChunkselectdb_portal||[]).push([[4754],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var d=r.createContext({}),s=function(e){var t=r.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=s(e.components);return r.createElement(d.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,d=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=s(a),m=n,h=p["".concat(d,".").concat(m)]||p[m]||c[m]||i;return a?r.createElement(h,l(l({ref:t},u),{},{components:a})):r.createElement(h,l({ref:t},u))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,l=new Array(i);l[0]=m;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o[p]="string"==typeof e?e:n,l[1]=o;for(var s=2;s<i;s++)l[s]=a[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},67568:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var r=a(87462),n=(a(67294),a(3905));const i={title:"Doris Hudi external table",language:"en"},l=void 0,o={unversionedId:"ecosystem/external-table/hudi-external-table",id:"version-dev/ecosystem/external-table/hudi-external-table",title:"Doris Hudi external table",description:"\x3c!--",source:"@site/versioned_docs/version-dev/ecosystem/external-table/hudi-external-table.md",sourceDirName:"ecosystem/external-table",slug:"/ecosystem/external-table/hudi-external-table",permalink:"/docs/dev/ecosystem/external-table/hudi-external-table",draft:!1,editUrl:"https://github.com/apache/doris/edit/master/docs/en/docs/ecosystem/external-table/hudi-external-table.md",tags:[],version:"dev",frontMatter:{title:"Doris Hudi external table",language:"en"},sidebar:"docs",previous:{title:"Doris On ES",permalink:"/docs/dev/ecosystem/external-table/doris-on-es"},next:{title:"Doris On Iceberg",permalink:"/docs/dev/ecosystem/external-table/iceberg-of-doris"}},d={},s=[{value:"Glossary",id:"glossary",level:2},{value:"Noun in Doris",id:"noun-in-doris",level:3},{value:"How to use",id:"how-to-use",level:2},{value:"Create Hudi External Table",id:"create-hudi-external-table",level:3},{value:"Parameter Description",id:"parameter-description",level:4},{value:"Show table structure",id:"show-table-structure",level:3},{value:"Data Type Matching",id:"data-type-matching",level:2},{value:"Query Usage",id:"query-usage",level:3}],u={toc:s};function p(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"hudi-external-table-of-doris"},"Hudi External Table of Doris"),(0,n.kt)("version",{deprecated:"1.2.0",comment:"Please use the Multi-Catalog function to access Hudi"},(0,n.kt)("p",null,"Hudi External Table of Doris provides Doris with the ability to access hdui external tables directly, eliminating the need for cumbersome data import and leveraging Doris' own OLAP capabilities to solve hudi table data analysis problems."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"support hudi data sources for Doris"),(0,n.kt)("li",{parentName:"ol"},"Support joint query between Doris and hdui data source tables to perform more complex analysis operations")),(0,n.kt)("p",null,"This document introduces how to use this feature and the considerations.")),(0,n.kt)("h2",{id:"glossary"},"Glossary"),(0,n.kt)("h3",{id:"noun-in-doris"},"Noun in Doris"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"FE: Frontend, the front-end node of Doris, responsible for metadata management and request access"),(0,n.kt)("li",{parentName:"ul"},"BE: Backend, the backend node of Doris, responsible for query execution and data storage")),(0,n.kt)("h2",{id:"how-to-use"},"How to use"),(0,n.kt)("h3",{id:"create-hudi-external-table"},"Create Hudi External Table"),(0,n.kt)("p",null,"Hudi tables can be created in Doris with or without schema. You do not need to declare the column definitions of the table when creating an external table, Doris can resolve the column definitions of the table in hive metastore when querying the table."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create a separate external table to mount the Hudi table.",(0,n.kt)("br",{parentName:"p"}),"\n","The syntax can be viewed in ",(0,n.kt)("inlineCode",{parentName:"p"},"HELP CREATE TABLE"),"."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-sql"},'-- Syntax\nCREATE [EXTERNAL] TABLE table_name\n[(column_definition1[, column_definition2, ...])]\nENGINE = HUDI\n[COMMENT "comment"]\nPROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n')))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'-- Example: Mount hudi_table_in_hive_metastore under hudi_db_in_hive_metastore in Hive MetaStore \nCREATE TABLE `t_hudi` \nENGINE = HUDI\nPROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n\n-- Example\uff1aMount hudi table with schema.\nCREATE TABLE `t_hudi` (\n    `id` int NOT NULL COMMENT "id number",\n    `name` varchar(10) NOT NULL COMMENT "user name"\n) ENGINE = HUDI\nPROPERTIES (\n"hudi.database" = "hudi_db_in_hive_metastore",\n"hudi.table" = "hudi_table_in_hive_metastore",\n"hudi.hive.metastore.uris" = "thrift://127.0.0.1:9083"\n);\n```\n')),(0,n.kt)("h4",{id:"parameter-description"},"Parameter Description"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"column_definition",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"When create hudi table without schema(recommended), doris will resolve columns from hive metastore when query."),(0,n.kt)("li",{parentName:"ul"},"When create hudi table with schema, the columns must exist in corresponding table in hive metastore."))),(0,n.kt)("li",{parentName:"ul"},"ENGINE needs to be specified as HUDI"),(0,n.kt)("li",{parentName:"ul"},"PROPERTIES property.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"hudi.hive.metastore.uris"),": Hive Metastore service address"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"hudi.database"),": the name of the database to which Hudi is mounted"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"hudi.table"),": the name of the table to which Hudi is mounted, not required when mounting Hudi database.")))),(0,n.kt)("h3",{id:"show-table-structure"},"Show table structure"),(0,n.kt)("p",null,"Show table structure can be viewed by ",(0,n.kt)("inlineCode",{parentName:"p"},"HELP SHOW CREATE TABLE"),"."),(0,n.kt)("h2",{id:"data-type-matching"},"Data Type Matching"),(0,n.kt)("p",null,"The supported Hudi column types correspond to Doris in the following table."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"center"},"Hudi"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Doris"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"BOOLEAN"),(0,n.kt)("td",{parentName:"tr",align:"center"},"BOOLEAN"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"INTEGER"),(0,n.kt)("td",{parentName:"tr",align:"center"},"INT"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"LONG"),(0,n.kt)("td",{parentName:"tr",align:"center"},"BIGINT"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"FLOAT"),(0,n.kt)("td",{parentName:"tr",align:"center"},"FLOAT"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"DOUBLE"),(0,n.kt)("td",{parentName:"tr",align:"center"},"DOUBLE"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"DATE"),(0,n.kt)("td",{parentName:"tr",align:"center"},"DATE"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"TIMESTAMP"),(0,n.kt)("td",{parentName:"tr",align:"center"},"DATETIME"),(0,n.kt)("td",{parentName:"tr",align:"center"},"Timestamp to Datetime with loss of precision")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"STRING"),(0,n.kt)("td",{parentName:"tr",align:"center"},"STRING"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"UUID"),(0,n.kt)("td",{parentName:"tr",align:"center"},"VARCHAR"),(0,n.kt)("td",{parentName:"tr",align:"center"},"Use VARCHAR instead")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"DECIMAL"),(0,n.kt)("td",{parentName:"tr",align:"center"},"DECIMAL"),(0,n.kt)("td",{parentName:"tr",align:"center"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"TIME"),(0,n.kt)("td",{parentName:"tr",align:"center"},"-"),(0,n.kt)("td",{parentName:"tr",align:"center"},"not supported")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"FIXED"),(0,n.kt)("td",{parentName:"tr",align:"center"},"-"),(0,n.kt)("td",{parentName:"tr",align:"center"},"not supported")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"BINARY"),(0,n.kt)("td",{parentName:"tr",align:"center"},"-"),(0,n.kt)("td",{parentName:"tr",align:"center"},"not supported")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"STRUCT"),(0,n.kt)("td",{parentName:"tr",align:"center"},"-"),(0,n.kt)("td",{parentName:"tr",align:"center"},"not supported")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"LIST"),(0,n.kt)("td",{parentName:"tr",align:"center"},"-"),(0,n.kt)("td",{parentName:"tr",align:"center"},"not supported")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"center"},"MAP"),(0,n.kt)("td",{parentName:"tr",align:"center"},"-"),(0,n.kt)("td",{parentName:"tr",align:"center"},"not supported")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Note:")," "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The current default supported version of hudi is 0.10.0 and has not been tested in other versions. More versions will be supported in the future.")),(0,n.kt)("h3",{id:"query-usage"},"Query Usage"),(0,n.kt)("p",null,"Once you have finished building the hdui external table in Doris, it is no different from a normal Doris OLAP table except that you cannot use the data models in Doris (rollup, preaggregation, materialized views, etc.)"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"select * from t_hudi where k1 > 1000 and k3 = 'term' or k4 like '%doris';\n")))}p.isMDXComponent=!0}}]);