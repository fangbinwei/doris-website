"use strict";(self.webpackChunkselectdb_portal=self.webpackChunkselectdb_portal||[]).push([[74934],{3905:(n,e,t)=>{t.d(e,{Zo:()=>T,kt:()=>A});var a=t(67294);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function l(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function p(n,e){if(null==n)return{};var t,a,r=function(n,e){if(null==n)return{};var t,a,r={},i=Object.keys(n);for(a=0;a<i.length;a++)t=i[a],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)t=i[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var E=a.createContext({}),o=function(n){var e=a.useContext(E),t=e;return n&&(t="function"==typeof n?n(e):l(l({},e),n)),t},T=function(n){var e=o(n.components);return a.createElement(E.Provider,{value:e},n.children)},k="mdxType",N={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(n,e){var t=n.components,r=n.mdxType,i=n.originalType,E=n.parentName,T=p(n,["components","mdxType","originalType","parentName"]),k=o(t),m=r,A=k["".concat(E,".").concat(m)]||k[m]||N[m]||i;return t?a.createElement(A,l(l({ref:e},T),{},{components:t})):a.createElement(A,l({ref:e},T))}));function A(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var i=t.length,l=new Array(i);l[0]=m;var p={};for(var E in e)hasOwnProperty.call(e,E)&&(p[E]=e[E]);p.originalType=n,p[k]="string"==typeof n?n:r,l[1]=p;for(var o=2;o<i;o++)l[o]=t[o];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4389:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>E,contentTitle:()=>l,default:()=>k,frontMatter:()=>i,metadata:()=>p,toc:()=>o});var a=t(87462),r=(t(67294),t(3905));const i={title:"CREATE TABLE",language:"zh-CN"},l=void 0,p={unversionedId:"sql-reference/sql-statements/Data-Definition/CREATE-TABLE",id:"version-0.15/sql-reference/sql-statements/Data-Definition/CREATE-TABLE",title:"CREATE TABLE",description:"\x3c!--",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/version-0.15/sql-reference/sql-statements/Data-Definition/CREATE-TABLE.md",sourceDirName:"sql-reference/sql-statements/Data-Definition",slug:"/sql-reference/sql-statements/Data-Definition/CREATE-TABLE",permalink:"/zh-CN/docs/0.15/sql-reference/sql-statements/Data-Definition/CREATE-TABLE",draft:!1,tags:[],version:"0.15",frontMatter:{title:"CREATE TABLE",language:"zh-CN"},sidebar:"docs",previous:{title:"CREATE TABLE LIKE",permalink:"/zh-CN/docs/0.15/sql-reference/sql-statements/Data-Definition/CREATE-TABLE-LIKE"},next:{title:"CREATE VIEW",permalink:"/zh-CN/docs/0.15/sql-reference/sql-statements/Data-Definition/CREATE-VIEW"}},E={},o=[{value:"description",id:"description",level:2},{value:"example",id:"example",level:2},{value:"keyword",id:"keyword",level:2}],T={toc:o};function k(n){let{components:e,...t}=n;return(0,r.kt)("wrapper",(0,a.Z)({},T,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"create-table"},"CREATE TABLE"),(0,r.kt)("h2",{id:"description"},"description"),(0,r.kt)("p",null,"\u8be5\u8bed\u53e5\u7528\u4e8e\u521b\u5efa table\u3002\n\u8bed\u6cd5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE [EXTERNAL] TABLE [IF NOT EXISTS] [database.]table_name\n    (column_definition1[, column_definition2, ...]\n    [, index_definition1[, ndex_definition12,]])\n    [ENGINE = [olap|mysql|broker|hive]]\n    [key_desc]\n    [COMMENT "table comment"];\n    [partition_desc]\n    [distribution_desc]\n    [rollup_index]\n    [PROPERTIES ("key"="value", ...)]\n    [BROKER PROPERTIES ("key"="value", ...)]\n')),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"column_definition\n\u8bed\u6cd5\uff1a\n",(0,r.kt)("inlineCode",{parentName:"p"},'col_name col_type [agg_type] [NULL | NOT NULL] [DEFAULT "default_value"]')),(0,r.kt)("p",{parentName:"li"},"\u8bf4\u660e\uff1a\ncol_name\uff1a\u5217\u540d\u79f0\ncol_type\uff1a\u5217\u7c7b\u578b"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"    BOOLEAN\uff081\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a{0,1}\n    TINYINT\uff081\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a-2^7 + 1 ~ 2^7 - 1\n    SMALLINT\uff082\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a-2^15 + 1 ~ 2^15 - 1\n    INT\uff084\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a-2^31 + 1 ~ 2^31 - 1\n    BIGINT\uff088\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a-2^63 + 1 ~ 2^63 - 1\n    LARGEINT\uff0816\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a-2^127 + 1 ~ 2^127 - 1\n    FLOAT\uff084\u5b57\u8282\uff09\n        \u652f\u6301\u79d1\u5b66\u8ba1\u6570\u6cd5\n    DOUBLE\uff088\u5b57\u8282\uff09\n        \u652f\u6301\u79d1\u5b66\u8ba1\u6570\u6cd5\n    DECIMAL[(precision, scale)] (16\u5b57\u8282)\n        \u4fdd\u8bc1\u7cbe\u5ea6\u7684\u5c0f\u6570\u7c7b\u578b\u3002\u9ed8\u8ba4\u662f DECIMAL(10, 0)\n        precision: 1 ~ 27\n        scale: 0 ~ 9\n        \u5176\u4e2d\u6574\u6570\u90e8\u5206\u4e3a 1 ~ 18\n        \u4e0d\u652f\u6301\u79d1\u5b66\u8ba1\u6570\u6cd5\n    DATE\uff083\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a0000-01-01 ~ 9999-12-31\n    DATETIME\uff088\u5b57\u8282\uff09\n        \u8303\u56f4\uff1a0000-01-01 00:00:00 ~ 9999-12-31 23:59:59\n    CHAR[(length)]\n        \u5b9a\u957f\u5b57\u7b26\u4e32\u3002\u957f\u5ea6\u8303\u56f4\uff1a1 ~ 255\u3002\u9ed8\u8ba4\u4e3a1\n    VARCHAR[(length)]\n        \u53d8\u957f\u5b57\u7b26\u4e32\u3002\u957f\u5ea6\u8303\u56f4\uff1a1 ~ 65533\n    HLL (1~16385\u4e2a\u5b57\u8282)\n        hll\u5217\u7c7b\u578b\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u957f\u5ea6\u548c\u9ed8\u8ba4\u503c\u3001\u957f\u5ea6\u6839\u636e\u6570\u636e\u7684\u805a\u5408\n        \u7a0b\u5ea6\u7cfb\u7edf\u5185\u63a7\u5236\uff0c\u5e76\u4e14HLL\u5217\u53ea\u80fd\u901a\u8fc7\u914d\u5957\u7684hll_union_agg\u3001Hll_cardinality\u3001hll_hash\u8fdb\u884c\u67e5\u8be2\u6216\u4f7f\u7528\n    BITMAP\n        bitmap\u5217\u7c7b\u578b\uff0c\u4e0d\u9700\u8981\u6307\u5b9a\u957f\u5ea6\u548c\u9ed8\u8ba4\u503c\u3002\u8868\u793a\u6574\u578b\u7684\u96c6\u5408\uff0c\u5143\u7d20\u6700\u5927\u652f\u6301\u52302^64 - 1\n")),(0,r.kt)("p",{parentName:"li"},"agg_type\uff1a\u805a\u5408\u7c7b\u578b\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u5219\u8be5\u5217\u4e3a key \u5217\u3002\u5426\u5219\uff0c\u8be5\u5217\u4e3a value \u5217"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"SUM\u3001MAX\u3001MIN\u3001REPLACE"),(0,r.kt)("li",{parentName:"ul"},"HLL_UNION(\u4ec5\u7528\u4e8eHLL\u5217\uff0c\u4e3aHLL\u72ec\u6709\u7684\u805a\u5408\u65b9\u5f0f)\u3001"),(0,r.kt)("li",{parentName:"ul"},"BITMAP_UNION(\u4ec5\u7528\u4e8e BITMAP \u5217\uff0c\u4e3a BITMAP \u72ec\u6709\u7684\u805a\u5408\u65b9\u5f0f)\u3001"),(0,r.kt)("li",{parentName:"ul"},"REPLACE_IF_NOT_NULL\uff1a\u8fd9\u4e2a\u805a\u5408\u7c7b\u578b\u7684\u542b\u4e49\u662f\u5f53\u4e14\u4ec5\u5f53\u65b0\u5bfc\u5165\u6570\u636e\u662f\u975eNULL\u503c\u65f6\u4f1a\u53d1\u751f\u66ff\u6362\u884c\u4e3a\uff0c\u5982\u679c\u65b0\u5bfc\u5165\u7684\u6570\u636e\u662fNULL\uff0c\u90a3\u4e48Doris\u4ecd\u7136\u4f1a\u4fdd\u7559\u539f\u503c\u3002\u6ce8\u610f\uff1a\u5982\u679c\u7528\u5728\u5efa\u8868\u65f6REPLACE_IF_NOT_NULL\u5217\u6307\u5b9a\u4e86NOT NULL\uff0c\u90a3\u4e48Doris\u4ecd\u7136\u4f1a\u5c06\u5176\u8f6c\u5316NULL\uff0c\u4e0d\u4f1a\u5411\u7528\u6237\u62a5\u9519\u3002\u7528\u6237\u53ef\u4ee5\u501f\u52a9\u8fd9\u4e2a\u7c7b\u578b\u5b8c\u6210\u90e8\u5206\u5217\u5bfc\u5165\u7684\u529f\u80fd\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8be5\u7c7b\u578b\u53ea\u5bf9\u805a\u5408\u6a21\u578b(key_desc\u7684type\u4e3aAGGREGATE KEY)\u6709\u7528\uff0c\u5176\u5b83\u6a21\u578b\u4e0d\u9700\u8981\u6307\u8fd9\u4e2a\u3002")),(0,r.kt)("p",{parentName:"li"},"\u662f\u5426\u5141\u8bb8\u4e3aNULL: \u9ed8\u8ba4\u5141\u8bb8\u4e3a NULL\u3002NULL \u503c\u5728\u5bfc\u5165\u6570\u636e\u4e2d\u7528 \\N \u6765\u8868\u793a"),(0,r.kt)("p",{parentName:"li"},"\u6ce8\u610f\uff1a\nBITMAP_UNION\u805a\u5408\u7c7b\u578b\u5217\u5728\u5bfc\u5165\u65f6\u7684\u539f\u59cb\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662fTINYINT,SMALLINT,INT,BIGINT\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"index_definition\n\u8bed\u6cd5\uff1a\n",(0,r.kt)("inlineCode",{parentName:"p"},"INDEX index_name (col_name[, col_name, ...]) [USING BITMAP] COMMENT 'xxxxxx'"),"\n\u8bf4\u660e\uff1a\nindex_name\uff1a\u7d22\u5f15\u540d\u79f0\ncol_name\uff1a\u5217\u540d\n\u6ce8\u610f\uff1a\n\u5f53\u524d\u4ec5\u652f\u6301BITMAP\u7d22\u5f15\uff0c BITMAP\u7d22\u5f15\u4ec5\u652f\u6301\u5e94\u7528\u4e8e\u5355\u5217")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"ENGINE \u7c7b\u578b\n\u9ed8\u8ba4\u4e3a olap\u3002\u53ef\u9009 mysql, broker, hive\n1) \u5982\u679c\u662f mysql\uff0c\u5219\u9700\u8981\u5728 properties \u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    PROPERTIES (\n        "host" = "mysql_server_host",\n        "port" = "mysql_server_port",\n        "user" = "your_user_name",\n        "password" = "your_password",\n        "database" = "database_name",\n        "table" = "table_name"\n        )\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\u6ce8\u610f\uff1a\n    "table" \u6761\u76ee\u4e2d\u7684 "table_name" \u662f mysql \u4e2d\u7684\u771f\u5b9e\u8868\u540d\u3002\n    \u800c CREATE TABLE \u8bed\u53e5\u4e2d\u7684 table_name \u662f\u8be5 mysql \u8868\u5728 Doris \u4e2d\u7684\u540d\u5b57\uff0c\u53ef\u4ee5\u4e0d\u540c\u3002\n\n\u5728 Doris \u521b\u5efa mysql \u8868\u7684\u76ee\u7684\u662f\u53ef\u4ee5\u901a\u8fc7 Doris \u8bbf\u95ee mysql \u6570\u636e\u5e93\u3002\n    \u800c Doris \u672c\u8eab\u5e76\u4e0d\u7ef4\u62a4\u3001\u5b58\u50a8\u4efb\u4f55 mysql \u6570\u636e\u3002\n2) \u5982\u679c\u662f broker\uff0c\u8868\u793a\u8868\u7684\u8bbf\u95ee\u9700\u8981\u901a\u8fc7\u6307\u5b9a\u7684broker, \u9700\u8981\u5728 properties \u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a\n    ```\n    PROPERTIES (\n    "broker_name" = "broker_name",\n    "path" = "file_path1[,file_path2]",\n    "column_separator" = "value_separator"\n    "line_delimiter" = "value_delimiter"\n    )\n    ```\n    \u53e6\u5916\u8fd8\u9700\u8981\u63d0\u4f9bBroker\u9700\u8981\u7684Property\u4fe1\u606f\uff0c\u901a\u8fc7BROKER PROPERTIES\u6765\u4f20\u9012\uff0c\u4f8b\u5982HDFS\u9700\u8981\u4f20\u5165\n    ```\n    BROKER PROPERTIES(\n        "username" = "name",\n        "password" = "password"\n    )\n    ```\n    \u8fd9\u4e2a\u6839\u636e\u4e0d\u540c\u7684Broker\u7c7b\u578b\uff0c\u9700\u8981\u4f20\u5165\u7684\u5185\u5bb9\u4e5f\u4e0d\u76f8\u540c\n\u6ce8\u610f\uff1a\n    "path" \u4e2d\u5982\u679c\u6709\u591a\u4e2a\u6587\u4ef6\uff0c\u7528\u9017\u53f7[,]\u5206\u5272\u3002\u5982\u679c\u6587\u4ef6\u540d\u4e2d\u5305\u542b\u9017\u53f7\uff0c\u90a3\u4e48\u4f7f\u7528 %2c \u6765\u66ff\u4ee3\u3002\u5982\u679c\u6587\u4ef6\u540d\u4e2d\u5305\u542b %\uff0c\u4f7f\u7528 %25 \u4ee3\u66ff\n    \u73b0\u5728\u6587\u4ef6\u5185\u5bb9\u683c\u5f0f\u652f\u6301CSV\uff0c\u652f\u6301GZ\uff0cBZ2\uff0cLZ4\uff0cLZO(LZOP) \u538b\u7f29\u683c\u5f0f\u3002\n\n3) \u5982\u679c\u662f hive\uff0c\u5219\u9700\u8981\u5728 properties \u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a\n```\nPROPERTIES (\n    "database" = "hive_db_name",\n    "table" = "hive_table_name",\n    "hive.metastore.uris" = "thrift://127.0.0.1:9083"\n)\n\n```\n\u5176\u4e2d database \u662f hive \u8868\u5bf9\u5e94\u7684\u5e93\u540d\u5b57\uff0ctable \u662f hive \u8868\u7684\u540d\u5b57\uff0chive.metastore.uris \u662f hive metastore \u670d\u52a1\u5730\u5740\u3002\n\u6ce8\u610f\uff1a\u76ee\u524dhive\u5916\u90e8\u8868\u4ec5\u7528\u4e8eSpark Load\u4f7f\u7528\uff0c\u4e0d\u652f\u6301\u67e5\u8be2\u3002\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"key_desc\n\u8bed\u6cd5\uff1a\n",(0,r.kt)("inlineCode",{parentName:"p"},"key_type(k1[,k2 ...])"),"\n\u8bf4\u660e\uff1a\n\u6570\u636e\u6309\u7167\u6307\u5b9a\u7684key\u5217\u8fdb\u884c\u6392\u5e8f\uff0c\u4e14\u6839\u636e\u4e0d\u540c\u7684key_type\u5177\u6709\u4e0d\u540c\u7279\u6027\u3002\nkey_type\u652f\u6301\u4ee5\u4e0b\u7c7b\u578b\uff1a\nAGGREGATE KEY:key\u5217\u76f8\u540c\u7684\u8bb0\u5f55\uff0cvalue\u5217\u6309\u7167\u6307\u5b9a\u7684\u805a\u5408\u7c7b\u578b\u8fdb\u884c\u805a\u5408\uff0c\n\u9002\u5408\u62a5\u8868\u3001\u591a\u7ef4\u5206\u6790\u7b49\u4e1a\u52a1\u573a\u666f\u3002\nUNIQUE KEY:key\u5217\u76f8\u540c\u7684\u8bb0\u5f55\uff0cvalue\u5217\u6309\u5bfc\u5165\u987a\u5e8f\u8fdb\u884c\u8986\u76d6\uff0c\n\u9002\u5408\u6309key\u5217\u8fdb\u884c\u589e\u5220\u6539\u67e5\u7684\u70b9\u67e5\u8be2\u4e1a\u52a1\u3002\nDUPLICATE KEY:key\u5217\u76f8\u540c\u7684\u8bb0\u5f55\uff0c\u540c\u65f6\u5b58\u5728\u4e8eDoris\u4e2d\uff0c\n\u9002\u5408\u5b58\u50a8\u660e\u7ec6\u6570\u636e\u6216\u8005\u6570\u636e\u65e0\u805a\u5408\u7279\u6027\u7684\u4e1a\u52a1\u573a\u666f\u3002\n\u9ed8\u8ba4\u4e3aDUPLICATE KEY\uff0ckey\u5217\u4e3a\u5217\u5b9a\u4e49\u4e2d\u524d36\u4e2a\u5b57\u8282, \u5982\u679c\u524d36\u4e2a\u5b57\u8282\u7684\u5217\u6570\u5c0f\u4e8e3\uff0c\u5c06\u4f7f\u7528\u524d\u4e09\u5217\u3002\n\u6ce8\u610f\uff1a\n\u9664AGGREGATE KEY\u5916\uff0c\u5176\u4ed6key_type\u5728\u5efa\u8868\u65f6\uff0cvalue\u5217\u4e0d\u9700\u8981\u6307\u5b9a\u805a\u5408\u7c7b\u578b\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"partition_desc\n\u76ee\u524d\u652f\u6301 RANGE \u548c LIST \u4e24\u79cd\u5206\u533a\u65b9\u5f0f\u3002\n5.1 RANGE \u5206\u533a\nRANGE partition\u63cf\u8ff0\u6709\u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\n1) LESS THAN\n\u8bed\u6cd5\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'    ```\n        PARTITION BY RANGE (k1, k2, ...)\n        (\n        PARTITION partition_name1 VALUES LESS THAN MAXVALUE|("value1", "value2", ...),\n        PARTITION partition_name2 VALUES LESS THAN MAXVALUE|("value1", "value2", ...)\n        ...\n        )\n    ```\n    \n    \u8bf4\u660e\uff1a\n        \u4f7f\u7528\u6307\u5b9a\u7684 key \u5217\u548c\u6307\u5b9a\u7684\u6570\u503c\u8303\u56f4\u8fdb\u884c\u5206\u533a\u3002\n        1) \u5206\u533a\u540d\u79f0\u4ec5\u652f\u6301\u5b57\u6bcd\u5f00\u5934\uff0c\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\n        2) \u76ee\u524d\u4ec5\u652f\u6301\u4ee5\u4e0b\u7c7b\u578b\u7684\u5217\u4f5c\u4e3a Range \u5206\u533a\u5217\n            TINYINT, SMALLINT, INT, BIGINT, LARGEINT, DATE, DATETIME\n        3) \u5206\u533a\u4e3a\u5de6\u95ed\u53f3\u5f00\u533a\u95f4\uff0c\u9996\u4e2a\u5206\u533a\u7684\u5de6\u8fb9\u754c\u4e3a\u505a\u6700\u5c0f\u503c\n        4) NULL \u503c\u53ea\u4f1a\u5b58\u653e\u5728\u5305\u542b\u6700\u5c0f\u503c\u7684\u5206\u533a\u4e2d\u3002\u5f53\u5305\u542b\u6700\u5c0f\u503c\u7684\u5206\u533a\u88ab\u5220\u9664\u540e\uff0cNULL \u503c\u5c06\u65e0\u6cd5\u5bfc\u5165\u3002\n        5) \u53ef\u4ee5\u6307\u5b9a\u4e00\u5217\u6216\u591a\u5217\u4f5c\u4e3a\u5206\u533a\u5217\u3002\u5982\u679c\u5206\u533a\u503c\u7f3a\u7701\uff0c\u5219\u4f1a\u9ed8\u8ba4\u586b\u5145\u6700\u5c0f\u503c\u3002\n    \n    \u6ce8\u610f\uff1a\n        1) \u5206\u533a\u4e00\u822c\u7528\u4e8e\u65f6\u95f4\u7ef4\u5ea6\u7684\u6570\u636e\u7ba1\u7406\n        2) \u6709\u6570\u636e\u56de\u6eaf\u9700\u6c42\u7684\uff0c\u53ef\u4ee5\u8003\u8651\u9996\u4e2a\u5206\u533a\u4e3a\u7a7a\u5206\u533a\uff0c\u4ee5\u4fbf\u540e\u7eed\u589e\u52a0\u5206\u533a\n\n2\uff09Fixed Range\n    \u8bed\u6cd5\uff1a\n    ```\n        PARTITION BY RANGE (k1, k2, k3, ...)\n        (\n        PARTITION partition_name1 VALUES [("k1-lower1", "k2-lower1", "k3-lower1",...), ("k1-upper1", "k2-upper1", "k3-upper1", ...)),\n        PARTITION partition_name2 VALUES [("k1-lower1-2", "k2-lower1-2", ...), ("k1-upper1-2", MAXVALUE, ))\n        "k3-upper1-2", ...\n        )\n    ```\n    \u8bf4\u660e\uff1a\n        1\uff09Fixed Range\u6bd4LESS THAN\u76f8\u5bf9\u7075\u6d3b\u4e9b\uff0c\u5de6\u53f3\u533a\u95f4\u5b8c\u5168\u7531\u7528\u6237\u81ea\u5df1\u786e\u5b9a\n        2\uff09\u5176\u4ed6\u4e0eLESS THAN\u4fdd\u6301\u540c\u6b65\n')),(0,r.kt)("p",{parentName:"li"},"5.2 LIST \u5206\u533a\nLIST partition\u5206\u4e3a\u5355\u5217\u5206\u533a\u548c\u591a\u5217\u5206\u533a\n1) \u5355\u5217\u5206\u533a\n\u8bed\u6cd5\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'    ```\n        PARTITION BY LIST(k1)\n        (\n        PARTITION partition_name1 VALUES IN ("value1", "value2", ...),\n        PARTITION partition_name2 VALUES IN ("value1", "value2", ...)\n        ...\n        )\n    ```\n\n    \u8bf4\u660e\uff1a\n        \u4f7f\u7528\u6307\u5b9a\u7684 key \u5217\u548c\u5236\u5b9a\u7684\u679a\u4e3e\u503c\u8fdb\u884c\u5206\u533a\u3002\n        1) \u5206\u533a\u540d\u79f0\u4ec5\u652f\u6301\u5b57\u6bcd\u5f00\u5934\uff0c\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\u7ec4\u6210\n        2) \u76ee\u524d\u4ec5\u652f\u6301\u4ee5\u4e0b\u7c7b\u578b\u7684\u5217\u4f5c\u4e3a List \u5206\u533a\u5217\n            BOOLEAN, TINYINT, SMALLINT, INT, BIGINT, LARGEINT, DATE, DATETIME, CHAR, VARCHAR\n        3) \u5206\u533a\u4e3a\u679a\u4e3e\u503c\u96c6\u5408\uff0c\u5404\u4e2a\u5206\u533a\u4e4b\u95f4\u5206\u533a\u503c\u4e0d\u80fd\u91cd\u590d\n        4) \u4e0d\u53ef\u5bfc\u5165 NULL \u503c\n        5) \u5206\u533a\u503c\u4e0d\u80fd\u7f3a\u7701\uff0c\u5fc5\u987b\u6307\u5b9a\u81f3\u5c11\u4e00\u4e2a\n\n2) \u591a\u5217\u5206\u533a\n    \u8bed\u6cd5\uff1a\n\n    ```\n        PARTITION BY LIST(k1, k2)\n        (\n        PARTITION partition_name1 VALUES IN (("value1", "value2"), ("value1", "value2"), ...),\n        PARTITION partition_name2 VALUES IN (("value1", "value2"), ("value1", "value2"), ...)\n        ...\n        )\n    ```\n\n    \u8bf4\u660e\uff1a\n        1) \u591a\u5217\u5206\u533a\u7684\u5206\u533a\u662f\u5143\u7ec4\u679a\u4e3e\u503c\u7684\u96c6\u5408\n        2) \u6bcf\u4e2a\u5143\u7ec4\u503c\u7684\u4e2a\u6570\u5fc5\u987b\u4e0e\u5206\u533a\u5217\u4e2a\u6570\u76f8\u7b49\n        3) \u5176\u4ed6\u4e0e\u5355\u5217\u5206\u533a\u4fdd\u6301\u540c\u6b65\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"distribution_desc\n1) Hash \u5206\u6876\n\u8bed\u6cd5\uff1a\n",(0,r.kt)("inlineCode",{parentName:"p"},"DISTRIBUTED BY HASH (k1[,k2 ...]) [BUCKETS num]"),"\n\u8bf4\u660e\uff1a\n\u4f7f\u7528\u6307\u5b9a\u7684 key \u5217\u8fdb\u884c\u54c8\u5e0c\u5206\u6876\u3002\u9ed8\u8ba4\u5206\u533a\u6570\u4e3a10"),(0,r.kt)("p",{parentName:"li"},"\u5efa\u8bae:\u5efa\u8bae\u4f7f\u7528Hash\u5206\u6876\u65b9\u5f0f")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"PROPERTIES\n1) \u5982\u679c ENGINE \u7c7b\u578b\u4e3a olap\n\u53ef\u4ee5\u5728 properties \u8bbe\u7f6e\u8be5\u8868\u6570\u636e\u7684\u521d\u59cb\u5b58\u50a8\u4ecb\u8d28\u3001\u5b58\u50a8\u5230\u671f\u65f6\u95f4\u548c\u526f\u672c\u6570\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'   PROPERTIES (\n       "storage_medium" = "[SSD|HDD]",\n       ["storage_cooldown_time" = "yyyy-MM-dd HH:mm:ss"],\n       ["replication_num" = "3"]\n       ["replication_allocation" = "xxx"]\n       )\n')),(0,r.kt)("p",{parentName:"li"},"   storage_medium\uff1a        \u7528\u4e8e\u6307\u5b9a\u8be5\u5206\u533a\u7684\u521d\u59cb\u5b58\u50a8\u4ecb\u8d28\uff0c\u53ef\u9009\u62e9 SSD \u6216 HDD\u3002\u9ed8\u8ba4\u521d\u59cb\u5b58\u50a8\u4ecb\u8d28\u53ef\u901a\u8fc7fe\u7684\u914d\u7f6e\u6587\u4ef6 ",(0,r.kt)("inlineCode",{parentName:"p"},"fe.conf")," \u4e2d\u6307\u5b9a ",(0,r.kt)("inlineCode",{parentName:"p"},"default_storage_medium=xxx"),"\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\uff0c\u5219\u9ed8\u8ba4\u4e3a HDD\u3002\n\u6ce8\u610f\uff1a\u5f53FE\u914d\u7f6e\u9879 ",(0,r.kt)("inlineCode",{parentName:"p"},"enable_strict_storage_medium_check")," \u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"True")," \u65f6\uff0c\u82e5\u96c6\u7fa4\u4e2d\u6ca1\u6709\u8bbe\u7f6e\u5bf9\u5e94\u7684\u5b58\u50a8\u4ecb\u8d28\u65f6\uff0c\u5efa\u8868\u8bed\u53e5\u4f1a\u62a5\u9519 ",(0,r.kt)("inlineCode",{parentName:"p"},"Failed to find enough host in all backends with storage medium is SSD|HDD"),'.\nstorage_cooldown_time\uff1a \u5f53\u8bbe\u7f6e\u5b58\u50a8\u4ecb\u8d28\u4e3a SSD \u65f6\uff0c\u6307\u5b9a\u8be5\u5206\u533a\u5728 SSD \u4e0a\u7684\u5b58\u50a8\u5230\u671f\u65f6\u95f4\u3002\n\u9ed8\u8ba4\u5b58\u653e 30 \u5929\u3002\n\u683c\u5f0f\u4e3a\uff1a"yyyy-MM-dd HH:mm:ss"\nreplication_num:        \u6307\u5b9a\u5206\u533a\u7684\u526f\u672c\u6570\u3002\u9ed8\u8ba4\u4e3a 3\u3002\nreplication_allocation:     \u6309\u7167\u8d44\u6e90\u6807\u7b7e\u6765\u6307\u5b9a\u526f\u672c\u5206\u5e03\u3002'),(0,r.kt)("p",{parentName:"li"},"   \u5f53\u8868\u4e3a\u5355\u5206\u533a\u8868\u65f6\uff0c\u8fd9\u4e9b\u5c5e\u6027\u4e3a\u8868\u7684\u5c5e\u6027\u3002\n\u5f53\u8868\u4e3a\u4e24\u7ea7\u5206\u533a\u65f6\uff0c\u8fd9\u4e9b\u5c5e\u6027\u4e3a\u9644\u5c5e\u4e8e\u6bcf\u4e00\u4e2a\u5206\u533a\u3002\n\u5982\u679c\u5e0c\u671b\u4e0d\u540c\u5206\u533a\u6709\u4e0d\u540c\u5c5e\u6027\u3002\u53ef\u4ee5\u901a\u8fc7 ADD PARTITION \u6216 MODIFY PARTITION \u8fdb\u884c\u64cd\u4f5c"),(0,r.kt)("p",{parentName:"li"},"2) \u5982\u679c Engine \u7c7b\u578b\u4e3a olap, \u53ef\u4ee5\u6307\u5b9a\u67d0\u5217\u4f7f\u7528 bloom filter \u7d22\u5f15\nbloom filter \u7d22\u5f15\u4ec5\u9002\u7528\u4e8e\u67e5\u8be2\u6761\u4ef6\u4e3a in \u548c equal \u7684\u60c5\u51b5\uff0c\u8be5\u5217\u7684\u503c\u8d8a\u5206\u6563\u6548\u679c\u8d8a\u597d\n\u76ee\u524d\u53ea\u652f\u6301\u4ee5\u4e0b\u60c5\u51b5\u7684\u5217:\u9664\u4e86 TINYINT FLOAT DOUBLE \u7c7b\u578b\u4ee5\u5916\u7684 key \u5217\u53ca\u805a\u5408\u65b9\u6cd5\u4e3a REPLACE \u7684 value \u5217"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'       PROPERTIES (\n           "bloom_filter_columns"="k1,k2,k3"\n           )\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"3) \u5982\u679c\u5e0c\u671b\u4f7f\u7528 Colocate Join \u7279\u6027\uff0c\u9700\u8981\u5728 properties \u4e2d\u6307\u5b9a\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'       PROPERTIES (\n           "colocate_with"="table1"\n           )\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"4) \u5982\u679c\u5e0c\u671b\u4f7f\u7528\u52a8\u6001\u5206\u533a\u7279\u6027\uff0c\u9700\u8981\u5728properties \u4e2d\u6307\u5b9a\u3002\u6ce8\u610f\uff1a\u52a8\u6001\u5206\u533a\u53ea\u652f\u6301 RANGE \u5206\u533a\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'      PROPERTIES (\n          "dynamic_partition.enable" = "true|false",\n          "dynamic_partition.time_unit" = "HOUR|DAY|WEEK|MONTH",\n          "dynamic_partition.start" = "${integer_value}",\n          "dynamic_partition.end" = "${integer_value}",\n          "dynamic_partition.prefix" = "${string_value}",\n          "dynamic_partition.buckets" = "${integer_value}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'dynamic_partition.enable: \u7528\u4e8e\u6307\u5b9a\u8868\u7ea7\u522b\u7684\u52a8\u6001\u5206\u533a\u529f\u80fd\u662f\u5426\u5f00\u542f\u3002\u9ed8\u8ba4\u4e3a true\u3002\ndynamic_partition.time_unit: \u7528\u4e8e\u6307\u5b9a\u52a8\u6001\u6dfb\u52a0\u5206\u533a\u7684\u65f6\u95f4\u5355\u4f4d\uff0c\u53ef\u9009\u62e9\u4e3aHOUR\uff08\u5c0f\u65f6\uff09\uff0cDAY\uff08\u5929\uff09\uff0cWEEK(\u5468)\uff0cMONTH\uff08\u6708\uff09\u3002\n                             \u6ce8\u610f\uff1a\u4ee5\u5c0f\u65f6\u4e3a\u5355\u4f4d\u7684\u5206\u533a\u5217\uff0c\u6570\u636e\u7c7b\u578b\u4e0d\u80fd\u4e3a DATE\u3002\ndynamic_partition.start: \u7528\u4e8e\u6307\u5b9a\u5411\u524d\u5220\u9664\u591a\u5c11\u4e2a\u5206\u533a\u3002\u503c\u5fc5\u987b\u5c0f\u4e8e0\u3002\u9ed8\u8ba4\u4e3a Integer.MIN_VALUE\u3002\ndynamic_partition.end: \u7528\u4e8e\u6307\u5b9a\u63d0\u524d\u521b\u5efa\u7684\u5206\u533a\u6570\u91cf\u3002\u503c\u5fc5\u987b\u5927\u4e8e0\u3002\ndynamic_partition.prefix: \u7528\u4e8e\u6307\u5b9a\u521b\u5efa\u7684\u5206\u533a\u540d\u524d\u7f00\uff0c\u4f8b\u5982\u5206\u533a\u540d\u524d\u7f00\u4e3ap\uff0c\u5219\u81ea\u52a8\u521b\u5efa\u5206\u533a\u540d\u4e3ap20200108\ndynamic_partition.buckets: \u7528\u4e8e\u6307\u5b9a\u81ea\u52a8\u521b\u5efa\u7684\u5206\u533a\u5206\u6876\u6570\u91cf\ndynamic_partition.create_history_partition: \u7528\u4e8e\u521b\u5efa\u5386\u53f2\u5206\u533a\u529f\u80fd\u662f\u5426\u5f00\u542f\u3002\u9ed8\u8ba4\u4e3a false\u3002\ndynamic_partition.history_partition_num: \u5f53\u5f00\u542f\u521b\u5efa\u5386\u53f2\u5206\u533a\u529f\u80fd\u65f6\uff0c\u7528\u4e8e\u6307\u5b9a\u521b\u5efa\u5386\u53f2\u5206\u533a\u6570\u91cf\u3002\ndynamic_partition.reserved_history_periods: \u7528\u4e8e\u6307\u5b9a\u4fdd\u7559\u7684\u5386\u53f2\u5206\u533a\u7684\u65f6\u95f4\u6bb5\u3002\n\n5) \u5efa\u8868\u65f6\u53ef\u4ee5\u6279\u91cf\u521b\u5efa\u591a\u4e2a Rollup\n\u8bed\u6cd5\uff1a\n```\n    ROLLUP (rollup_name (column_name1, column_name2, ...)\n           [FROM from_index_name]\n            [PROPERTIES ("key"="value", ...)],...)\n```\n\n6) \u5982\u679c\u5e0c\u671b\u4f7f\u7528 \u5185\u5b58\u8868 \u7279\u6027\uff0c\u9700\u8981\u5728 properties \u4e2d\u6307\u5b9a\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'        PROPERTIES (\n           "in_memory"="true"\n        )   \n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u5f53 in_memory \u5c5e\u6027\u4e3a true \u65f6\uff0cDoris\u4f1a\u5c3d\u53ef\u80fd\u5c06\u8be5\u8868\u7684\u6570\u636e\u548c\u7d22\u5f15Cache\u5230BE \u5185\u5b58\u4e2d\n\n7) \u521b\u5efaUNIQUE_KEYS\u8868\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2asequence\u5217\uff0c\u5f53KEY\u5217\u76f8\u540c\u65f6\uff0c\u5c06\u6309\u7167sequence\u5217\u8fdb\u884cREPLACE(\u8f83\u5927\u503c\u66ff\u6362\u8f83\u5c0f\u503c\uff0c\u5426\u5219\u65e0\u6cd5\u66ff\u6362)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"        PROPERTIES (\n            \"function_column.sequence_type\" = 'Date',\n        );\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"sequence_type\u7528\u6765\u6307\u5b9asequence\u5217\u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u4e3a\u6574\u578b\u548c\u65f6\u95f4\u7c7b\u578b\n")),(0,r.kt)("h2",{id:"example"},"example"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a olap \u8868\uff0c\u4f7f\u7528 HASH \u5206\u6876\uff0c\u4f7f\u7528\u5217\u5b58\uff0c\u76f8\u540ckey\u7684\u8bb0\u5f55\u8fdb\u884c\u805a\u5408"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'CREATE TABLE example_db.table_hash\n(\nk1 BOOLEAN,\nk2 TINYINT,\nk3 DECIMAL(10, 2) DEFAULT "10.5",\nv1 CHAR(10) REPLACE,\nv2 INT SUM\n)\nENGINE=olap\nAGGREGATE KEY(k1, k2, k3)\nCOMMENT "my first doris table"\nDISTRIBUTED BY HASH(k1) BUCKETS 32;\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a olap \u8868\uff0c\u4f7f\u7528 Hash \u5206\u6876\uff0c\u4f7f\u7528\u5217\u5b58\uff0c\u76f8\u540ckey\u7684\u8bb0\u5f55\u8fdb\u884c\u8986\u76d6\uff0c\n\u8bbe\u7f6e\u521d\u59cb\u5b58\u50a8\u4ecb\u8d28\u548c\u51b7\u5374\u65f6\u95f4"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},' CREATE TABLE example_db.table_hash\n (\n k1 BIGINT,\n k2 LARGEINT,\n v1 VARCHAR(2048) REPLACE,\n v2 SMALLINT SUM DEFAULT "10"\n )\n ENGINE=olap\n AGGREGATE KEY(k1, k2)\n DISTRIBUTED BY HASH (k1, k2) BUCKETS 32\n PROPERTIES(\n "storage_medium" = "SSD",\n "storage_cooldown_time" = "2015-06-04 00:00:00"\n );\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a olap \u8868\uff0c\u4f7f\u7528 Range \u5206\u533a\uff0c\u4f7f\u7528Hash\u5206\u6876\uff0c\u9ed8\u8ba4\u4f7f\u7528\u5217\u5b58\uff0c\n\u76f8\u540ckey\u7684\u8bb0\u5f55\u540c\u65f6\u5b58\u5728\uff0c\u8bbe\u7f6e\u521d\u59cb\u5b58\u50a8\u4ecb\u8d28\u548c\u51b7\u5374\u65f6\u95f4"),(0,r.kt)("p",{parentName:"li"}," 1\uff09LESS THAN"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'CREATE TABLE example_db.table_range\n(\nk1 DATE,\nk2 INT,\nk3 SMALLINT,\nv1 VARCHAR(2048),\nv2 DATETIME DEFAULT "2014-02-04 15:36:00"\n)\nENGINE=olap\nDUPLICATE KEY(k1, k2, k3)\nPARTITION BY RANGE (k1)\n(\nPARTITION p1 VALUES LESS THAN ("2014-01-01"),\nPARTITION p2 VALUES LESS THAN ("2014-06-01"),\nPARTITION p3 VALUES LESS THAN ("2014-12-01")\n)\nDISTRIBUTED BY HASH(k2) BUCKETS 32\nPROPERTIES(\n"storage_medium" = "SSD", "storage_cooldown_time" = "2015-06-04 00:00:00"\n);\n')),(0,r.kt)("p",{parentName:"li"}," \u8bf4\u660e\uff1a\n\u8fd9\u4e2a\u8bed\u53e5\u4f1a\u5c06\u6570\u636e\u5212\u5206\u6210\u5982\u4e0b3\u4e2a\u5206\u533a\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'( {    MIN     },   {"2014-01-01"} )\n[ {"2014-01-01"},   {"2014-06-01"} )\n[ {"2014-06-01"},   {"2014-12-01"} )\n')),(0,r.kt)("p",{parentName:"li"}," \u4e0d\u5728\u8fd9\u4e9b\u5206\u533a\u8303\u56f4\u5185\u7684\u6570\u636e\u5c06\u89c6\u4e3a\u975e\u6cd5\u6570\u636e\u88ab\u8fc7\u6ee4"),(0,r.kt)("p",{parentName:"li"},"2) Fixed Range"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'CREATE TABLE table_range\n(\nk1 DATE,\nk2 INT,\nk3 SMALLINT,\nv1 VARCHAR(2048),\nv2 DATETIME DEFAULT "2014-02-04 15:36:00"\n)\nENGINE=olap\nDUPLICATE KEY(k1, k2, k3)\nPARTITION BY RANGE (k1, k2, k3)\n(\nPARTITION p1 VALUES [("2014-01-01", "10", "200"), ("2014-01-01", "20", "300")),\nPARTITION p2 VALUES [("2014-06-01", "100", "200"), ("2014-07-01", "100", "300"))\n)\nDISTRIBUTED BY HASH(k2) BUCKETS 32\nPROPERTIES(\n"storage_medium" = "SSD"\n);\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a olap \u8868\uff0c\u4f7f\u7528 List \u5206\u533a\uff0c\u4f7f\u7528Hash\u5206\u6876\uff0c\u9ed8\u8ba4\u4f7f\u7528\u5217\u5b58\uff0c\n\u76f8\u540ckey\u7684\u8bb0\u5f55\u540c\u65f6\u5b58\u5728\uff0c\u8bbe\u7f6e\u521d\u59cb\u5b58\u50a8\u4ecb\u8d28\u548c\u51b7\u5374\u65f6\u95f4"),(0,r.kt)("p",{parentName:"li"}," 1\uff09\u5355\u5217\u5206\u533a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'CREATE TABLE example_db.table_list\n(\nk1 INT,\nk2 VARCHAR(128),\nk3 SMALLINT,\nv1 VARCHAR(2048),\nv2 DATETIME DEFAULT "2014-02-04 15:36:00"\n)\nENGINE=olap\nDUPLICATE KEY(k1, k2, k3)\nPARTITION BY LIST (k1)\n(\nPARTITION p1 VALUES IN ("1", "2", "3"),\nPARTITION p2 VALUES IN ("4", "5", "6"),\nPARTITION p3 VALUES IN ("7", "8", "9")\n)\nDISTRIBUTED BY HASH(k2) BUCKETS 32\nPROPERTIES(\n"storage_medium" = "SSD", "storage_cooldown_time" = "2022-06-04 00:00:00"\n);\n')),(0,r.kt)("p",{parentName:"li"}," \u8bf4\u660e\uff1a\n\u8fd9\u4e2a\u8bed\u53e5\u4f1a\u5c06\u6570\u636e\u5212\u5206\u6210\u5982\u4e0b3\u4e2a\u5206\u533a\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'("1", "2", "3")\n("4", "5", "6")\n("7", "8", "9")\n')),(0,r.kt)("p",{parentName:"li"}," \u4e0d\u5728\u8fd9\u4e9b\u5206\u533a\u679a\u4e3e\u503c\u5185\u7684\u6570\u636e\u5c06\u89c6\u4e3a\u975e\u6cd5\u6570\u636e\u88ab\u8fc7\u6ee4"),(0,r.kt)("p",{parentName:"li"}," 2) \u591a\u5217\u5206\u533a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'CREATE TABLE example_db.table_list\n(\nk1 INT,\nk2 VARCHAR(128),\nk3 SMALLINT,\nv1 VARCHAR(2048),\nv2 DATETIME DEFAULT "2014-02-04 15:36:00"\n)\nENGINE=olap\nDUPLICATE KEY(k1, k2, k3)\nPARTITION BY LIST (k1, k2)\n(\nPARTITION p1 VALUES IN (("1","beijing"), ("1", "shanghai")),\nPARTITION p2 VALUES IN (("2","beijing"), ("2", "shanghai")),\nPARTITION p3 VALUES IN (("3","beijing"), ("3", "shanghai"))\n)\nDISTRIBUTED BY HASH(k2) BUCKETS 32\nPROPERTIES(\n"storage_medium" = "SSD", "storage_cooldown_time" = "2022-06-04 00:00:00"\n);\n')),(0,r.kt)("p",{parentName:"li"}," \u8bf4\u660e\uff1a\n\u8fd9\u4e2a\u8bed\u53e5\u4f1a\u5c06\u6570\u636e\u5212\u5206\u6210\u5982\u4e0b3\u4e2a\u5206\u533a\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'(("1","beijing"), ("1", "shanghai"))\n(("2","beijing"), ("2", "shanghai"))\n(("3","beijing"), ("3", "shanghai"))\n')),(0,r.kt)("p",{parentName:"li"}," \u4e0d\u5728\u8fd9\u4e9b\u5206\u533a\u679a\u4e3e\u503c\u5185\u7684\u6570\u636e\u5c06\u89c6\u4e3a\u975e\u6cd5\u6570\u636e\u88ab\u8fc7\u6ee4")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a mysql \u8868"),(0,r.kt)("p",{parentName:"li"},"5.1 \u76f4\u63a5\u901a\u8fc7\u5916\u8868\u4fe1\u606f\u521b\u5efamysql\u8868"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE EXTERNAL TABLE example_db.table_mysql\n    (\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    k4 VARCHAR(2048),\n    k5 DATETIME\n    )\n    ENGINE=mysql\n    PROPERTIES\n    (\n    "host" = "127.0.0.1",\n    "port" = "8239",\n    "user" = "mysql_user",\n    "password" = "mysql_passwd",\n    "database" = "mysql_db_test",\n    "table" = "mysql_table_test"\n    )\n')),(0,r.kt)("p",null,"   5.2 \u901a\u8fc7External Catalog Resource\u521b\u5efamysql\u8868"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'   CREATE EXTERNAL RESOURCE "mysql_resource" \n   PROPERTIES\n   (\n     "type" = "odbc_catalog",\n     "user" = "mysql_user",\n     "password" = "mysql_passwd",\n     "host" = "127.0.0.1",\n      "port" = "8239"           \n   );\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE EXTERNAL TABLE example_db.table_mysql\n    (\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    k4 VARCHAR(2048),\n    k5 DATETIME\n    )\n    ENGINE=mysql\n    PROPERTIES\n    (\n    "odbc_catalog_resource" = "mysql_resource",\n    "database" = "mysql_db_test",\n    "table" = "mysql_table_test"\n    )\n')),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},'\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u6587\u4ef6\u5b58\u50a8\u5728HDFS\u4e0a\u7684 broker \u5916\u90e8\u8868, \u6570\u636e\u4f7f\u7528 "|" \u5206\u5272\uff0c"\\n" \u6362\u884c')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE EXTERNAL TABLE example_db.table_broker (\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    k4 VARCHAR(2048),\n    k5 DATETIME\n    )\n    ENGINE=broker\n    PROPERTIES (\n    "broker_name" = "hdfs",\n    "path" = "hdfs://hdfs_host:hdfs_port/data1,hdfs://hdfs_host:hdfs_port/data2,hdfs://hdfs_host:hdfs_port/data3%2c4",\n    "column_separator" = "|",\n    "line_delimiter" = "\\n"\n    )\n    BROKER PROPERTIES (\n    "username" = "hdfs_user",\n    "password" = "hdfs_password"\n    )\n')),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u5f20\u542b\u6709HLL\u5217\u7684\u8868")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE example_db.example_table\n    (\n    k1 TINYINT,\n    k2 DECIMAL(10, 2) DEFAULT "10.5",\n    v1 HLL HLL_UNION,\n    v2 HLL HLL_UNION\n    )\n    ENGINE=olap\n    AGGREGATE KEY(k1, k2)\n    DISTRIBUTED BY HASH(k1) BUCKETS 32;\n')),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u5f20\u542b\u6709BITMAP_UNION\u805a\u5408\u7c7b\u578b\u7684\u8868\uff08v1\u548cv2\u5217\u7684\u539f\u59cb\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u662fTINYINT,SMALLINT,INT\uff09")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE example_db.example_table\n    (\n    k1 TINYINT,\n    k2 DECIMAL(10, 2) DEFAULT "10.5",\n    v1 BITMAP BITMAP_UNION,\n    v2 BITMAP BITMAP_UNION\n    )\n    ENGINE=olap\n    AGGREGATE KEY(k1, k2)\n    DISTRIBUTED BY HASH(k1) BUCKETS 32;\n')),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e24\u5f20\u652f\u6301Colocate Join\u7684\u8868t1 \u548ct2")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE `t1` (\n    `id` int(11) COMMENT "",\n    `value` varchar(8) COMMENT ""\n    ) ENGINE=OLAP\n    DUPLICATE KEY(`id`)\n    DISTRIBUTED BY HASH(`id`) BUCKETS 10\n    PROPERTIES (\n    "colocate_with" = "t1"\n    );\n\n    CREATE TABLE `t2` (\n    `id` int(11) COMMENT "",\n    `value` varchar(8) COMMENT ""\n    ) ENGINE=OLAP\n    DUPLICATE KEY(`id`)\n    DISTRIBUTED BY HASH(`id`) BUCKETS 10\n    PROPERTIES (\n    "colocate_with" = "t1"\n    );\n')),(0,r.kt)("ol",{start:10},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u6587\u4ef6\u5b58\u50a8\u5728BOS\u4e0a\u7684 broker \u5916\u90e8\u8868")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE EXTERNAL TABLE example_db.table_broker (\n    k1 DATE\n    )\n    ENGINE=broker\n    PROPERTIES (\n    "broker_name" = "bos",\n    "path" = "bos://my_bucket/input/file",\n    )\n    BROKER PROPERTIES (\n      "bos_endpoint" = "http://bj.bcebos.com",\n      "bos_accesskey" = "xxxxxxxxxxxxxxxxxxxxxxxxxx",\n      "bos_secret_accesskey"="yyyyyyyyyyyyyyyyyyyy"\n    )\n')),(0,r.kt)("ol",{start:11},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u5e26\u6709bitmap \u7d22\u5f15\u7684\u8868")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE example_db.table_hash\n    (\n    k1 TINYINT,\n    k2 DECIMAL(10, 2) DEFAULT "10.5",\n    v1 CHAR(10) REPLACE,\n    v2 INT SUM,\n    INDEX k1_idx (k1) USING BITMAP COMMENT \'xxxxxx\'\n    )\n    ENGINE=olap\n    AGGREGATE KEY(k1, k2)\n    COMMENT "my first doris table"\n    DISTRIBUTED BY HASH(k1) BUCKETS 32;\n')),(0,r.kt)("ol",{start:12},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u52a8\u6001\u5206\u533a\u8868(\u9700\u8981\u5728FE\u914d\u7f6e\u4e2d\u5f00\u542f\u52a8\u6001\u5206\u533a\u529f\u80fd)\uff0c\u8be5\u8868\u6bcf\u5929\u63d0\u524d\u521b\u5efa3\u5929\u7684\u5206\u533a\uff0c\u5e76\u5220\u96643\u5929\u524d\u7684\u5206\u533a\u3002\u4f8b\u5982\u4eca\u5929\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"2020-01-08"),"\uff0c\u5219\u4f1a\u521b\u5efa\u5206\u533a\u540d\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"p20200108"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"p20200109"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"p20200110"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"p20200111"),"\u7684\u5206\u533a. \u5206\u533a\u8303\u56f4\u5206\u522b\u4e3a: ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[types: [DATE]; keys: [2020-01-08]; \u2025types: [DATE]; keys: [2020-01-09]; )\n[types: [DATE]; keys: [2020-01-09]; \u2025types: [DATE]; keys: [2020-01-10]; )\n[types: [DATE]; keys: [2020-01-10]; \u2025types: [DATE]; keys: [2020-01-11]; )\n[types: [DATE]; keys: [2020-01-11]; \u2025types: [DATE]; keys: [2020-01-12]; )\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE example_db.dynamic_partition\n    (\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    v1 VARCHAR(2048),\n    v2 DATETIME DEFAULT "2014-02-04 15:36:00"\n    )\n    ENGINE=olap\n    DUPLICATE KEY(k1, k2, k3)\n    PARTITION BY RANGE (k1) ()\n    DISTRIBUTED BY HASH(k2) BUCKETS 32\n    PROPERTIES(\n    "storage_medium" = "SSD",\n    "dynamic_partition.time_unit" = "DAY",\n    "dynamic_partition.start" = "-3",\n    "dynamic_partition.end" = "3",\n    "dynamic_partition.prefix" = "p",\n    "dynamic_partition.buckets" = "32"\n     );\n')),(0,r.kt)("ol",{start:13},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u5e26\u6709rollup\u7d22\u5f15\u7684\u8868")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    CREATE TABLE example_db.rollup_index_table\n    (\n        event_day DATE,\n        siteid INT DEFAULT '10',\n        citycode SMALLINT,\n        username VARCHAR(32) DEFAULT '',\n        pv BIGINT SUM DEFAULT '0'\n    )\n    AGGREGATE KEY(event_day, siteid, citycode, username)\n    DISTRIBUTED BY HASH(siteid) BUCKETS 10\n    rollup (\n    r1(event_day,siteid),\n    r2(event_day,citycode),\n    r3(event_day)\n    )\n    PROPERTIES(\"replication_num\" = \"3\");\n")),(0,r.kt)("ol",{start:14},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2a\u5185\u5b58\u8868")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE example_db.table_hash\n    (\n    k1 TINYINT,\n    k2 DECIMAL(10, 2) DEFAULT "10.5",\n    v1 CHAR(10) REPLACE,\n    v2 INT SUM,\n    INDEX k1_idx (k1) USING BITMAP COMMENT \'xxxxxx\'\n    )\n    ENGINE=olap\n    AGGREGATE KEY(k1, k2)\n    COMMENT "my first doris table"\n    DISTRIBUTED BY HASH(k1) BUCKETS 32\n    PROPERTIES ("in_memory"="true");\n')),(0,r.kt)("ol",{start:15},(0,r.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2ahive\u5916\u90e8\u8868")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE example_db.table_hive\n    (\n      k1 TINYINT,\n      k2 VARCHAR(50),\n      v INT\n    )\n    ENGINE=hive\n    PROPERTIES\n    (\n      "database" = "hive_db_name",\n      "table" = "hive_table_name",\n      "hive.metastore.uris" = "thrift://127.0.0.1:9083"\n    );\n')),(0,r.kt)("ol",{start:16},(0,r.kt)("li",{parentName:"ol"},"\u901a\u8fc7 replication_allocation \u6307\u5b9a\u8868\u7684\u526f\u672c\u5206\u5e03")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    CREATE TABLE example_db.table_hash\n    (\n    k1 TINYINT,\n    k2 DECIMAL(10, 2) DEFAULT "10.5"\n    )\n    DISTRIBUTED BY HASH(k1) BUCKETS 32\n    PROPERTIES (\n        "replication_allocation"="tag.location.group_a:1, tag.location.group_b:2"\n    );\n\n\n    CREATE TABLE example_db.dynamic_partition\n    (\n    k1 DATE,\n    k2 INT,\n    k3 SMALLINT,\n    v1 VARCHAR(2048),\n    v2 DATETIME DEFAULT "2014-02-04 15:36:00"\n    )\n    PARTITION BY RANGE (k1) ()\n    DISTRIBUTED BY HASH(k2) BUCKETS 32\n    PROPERTIES(\n    "dynamic_partition.time_unit" = "DAY",\n    "dynamic_partition.start" = "-3",\n    "dynamic_partition.end" = "3",\n    "dynamic_partition.prefix" = "p",\n    "dynamic_partition.buckets" = "32",\n    "dynamic_partition."replication_allocation" = "tag.location.group_a:3"\n     );\n')),(0,r.kt)("h2",{id:"keyword"},"keyword"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"CREATE,TABLE\n")))}k.isMDXComponent=!0}}]);